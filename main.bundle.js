!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t){t.exports=JSON.parse('{"0":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,0,0,0,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,0,0,1,0,0,0,1,1,1,0,0]},"1":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1]},"2":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,0,0,1,1,1,1,0,0,1,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1]},"3":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"4":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,0,1,1,1,0,0,0,1,1,1,1,0,0,1,1,0,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0]},"5":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"6":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,1,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"7":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0]},"8":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,0,0,1,1,0,0,0,1,0,1,1,1,0,0,1,0,0,1,1,1,1,0,0,1,0,0,0,0,1,1,1,0,0,0,0,1,1,0,1,1,1,1,1,0]},"9":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0]}," ":{"offsetX":-2,"offsetY":0,"width":7,"height":7,"tile":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},".":{"offsetX":0,"offsetY":0,"width":2,"height":7,"tile":[0,0,0,0,0,0,0,0,0,0,1,1,1,1]},":":{"offsetX":0,"offsetY":0,"width":2,"height":7,"tile":[0,0,1,1,1,1,0,0,0,0,1,1,1,1]},";":{"offsetX":0,"offsetY":2,"width":2,"height":7,"tile":[1,1,1,1,0,0,0,0,1,1,0,1,1,0]},"\'":{"offsetX":0,"offsetY":0,"width":2,"height":7,"tile":[1,1,1,1,0,1,0,0,0,0,0,0,0,0]},"\\"":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[1,1,0,1,1,1,1,0,1,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},",":{"offsetX":0,"offsetY":2,"width":2,"height":7,"tile":[0,0,0,0,0,0,0,0,1,1,0,1,1,0]},"!":{"offsetX":1,"offsetY":0,"width":2,"height":7,"tile":[1,1,1,1,1,1,1,1,1,1,0,0,1,1]},"?":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,0,1,1,0,0,1,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0]},"_":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1]},"-":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"+":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0]},"=":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]},"*":{"offsetX":0,"offsetY":0,"width":5,"height":7,"tile":[1,0,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0]},"(":{"offsetX":0,"offsetY":-1,"width":3,"height":9,"tile":[0,1,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,0,1,1]},")":{"offsetX":0,"offsetY":-1,"width":3,"height":9,"tile":[1,1,0,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,1,0]},"A":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,0,0,0,1,1,0,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1]},"B":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0]},"C":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,1,0,0,1,1,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,1,1,0,0,1,1,1,1,0]},"D":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,0,0,1,1,0,0,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,0,0]},"E":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1]},"F":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0]},"G":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,1,1,1,1,0,0,1,1,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,1,1,1,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0,0,1,1,1,1,1]},"H":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1]},"I":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1]},"J":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,0,0,1,1,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"K":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,0,0,1,1,0,1,1,0,1,1,0,0,1,1,1,1,0,0,0,1,1,1,1,1,0,0,1,1,0,1,1,1,0,1,1,0,0,1,1,1]},"L":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1]},"M":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1]},"N":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,1,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,1,1,1,0,0,0,1,1]},"O":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"P":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0]},"Q":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,1,1,1,1,0,1]},"R":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,0,0,1,1,0,1,1,1,0,1,1,0,0,1,1,1]},"S":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"T":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,1,1,1,1,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0]},"U":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,1,0]},"V":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0]},"W":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,1]},"X":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,0,0,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,1]},"Y":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,1,1,0,0,1,1,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,0]},"Z":{"offsetX":0,"offsetY":0,"width":7,"height":7,"tile":[1,1,1,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1]}}')},function(t,e,i){"use strict";i.r(e);var s=function(){return(s=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};var n,o,r,a,f={debug:!1},c=!1,h=0;function l(){c&&(requestAnimationFrame(l),r=Date.now(),(o=r-n)>24&&(n=r-o%24,f.debug&&console.log(h),a(),h++))}function u(t,e){var i=Object.keys(t).length,s={},n=0;i||e({});var o=function(o){var r=new XMLHttpRequest;r.onload=function(){if(!(r.status>=200&&r.status<300))throw console.error(r.responseText),new Error('Tile "'+o+'" was not found');s[o]=JSON.parse(r.responseText),++n===i&&e(s)},r.open("GET",t[o]),r.send()};for(var r in t)o(r)}function g(t,e){var i={};for(var s in t){var n=t[s];n.endsWith(e)&&(i[s]=n)}return i}function p(t,e,i){function s(t){i(t)}t.load(g(e,".mp3"),(function(){u(g(e,".json"),s)}))}var d=function(){},w=[],v={upPress:d,leftPress:d,downPress:d,rightPress:d,aPress:d,bPress:d,selectPress:d,startPress:d,upRelease:d,leftRelease:d,downRelease:d,rightRelease:d,aRelease:d,bRelease:d,selectRelease:d,startRelease:d,keyDown:d,keyUp:d,reset:function(){v.upPress=d,v.leftPress=d,v.downPress=d,v.rightPress=d,v.aPress=d,v.bPress=d,v.selectPress=d,v.startPress=d,v.upRelease=d,v.leftRelease=d,v.downRelease=d,v.rightRelease=d,v.aRelease=d,v.bRelease=d,v.selectRelease=d,v.startRelease=d,v.keyDown=d,v.keyUp=d},update:function(){for(var t=0,e=w;t<e.length;t++){var i=e[t];v[i]()}w=[]}};document.onkeydown=function(t){switch(t.preventDefault(),t.key){case"w":case"W":case"ArrowUp":w.push("upPress");break;case"d":case"D":case"ArrowRight":w.push("rightPress");break;case"s":case"S":case"ArrowDown":w.push("downPress");break;case"a":case"A":case"ArrowLeft":w.push("leftPress");break;case"j":case"J":case"z":case"Z":w.push("aPress");break;case"k":case"K":case"x":case"X":w.push("bPress");break;case" ":w.push("selectPress");break;case"Enter":w.push("startPress")}t.metaKey||w.push("keyDown")},document.onkeyup=function(t){switch(t.preventDefault(),t.key){case"w":case"W":case"ArrowUp":w.push("upRelease");break;case"d":case"D":case"ArrowRight":w.push("rightRelease");break;case"s":case"S":case"ArrowDown":w.push("downRelease");break;case"a":case"A":case"ArrowLeft":w.push("leftRelease");break;case"j":case"J":case"z":case"Z":w.push("aRelease");break;case"k":case"K":case"x":case"X":w.push("bRelease");break;case" ":w.push("selectRelease");break;case"Enter":w.push("startRelease")}t.metaKey||w.push("keyUp")};var y,m={tracks:{},load:function(t,e){var i=Object.keys(t).length,s=0;function n(){++s===i&&e()}for(var o in i||e(),t){var r=new Audio;this.tracks[o]=r,r.src=t[o],r.oncanplaythrough=n}},play:function(t,e,i){var s=this;void 0===e&&(e=!1),i&&(this.tracks[t].onended=function(){i(),s.tracks[t].onended=null}),this.tracks[t].loop=e,this.tracks[t].play()},pause:function(t){this.tracks[t].pause()},pauseAll:function(){for(var t in this.tracks)this.tracks[t].pause()}},b=function(){return(b=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},x=function(t,e){for(var i=0,s=e.length,n=t.length;i<s;i++,n++)t[n]=e[i];return t},X={},k=!1;function Y(t){t.canvas.clear("static",t.bgColor),Object.values(t.staticSprites).forEach((function(e){e.draw("static",t.canvas)}))}function S(t,e){t.canvas.clear("dynamic"),Object.values(t.animations).forEach((function(t){t.update("dynamic",e)})),Object.values(t.sprites).forEach((function(t){t.draw("dynamic",e)}))}function P(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];y.metaTiles=t,y.init.apply(y,e),Y(y),y.canvas.onResize=function(){y.onResize(),Y(y)},k=!1}function T(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!X[t])throw new Error('scene "'+t+'" does not exist');k=!0,y&&(y.animations={},y.metaTiles={},y.sprites={},y.staticSprites={},y.controls.reset(),"function"==typeof y.destroy&&y.destroy()),(y=X[t]).changeScene=T,y.preload&&Object.keys(y.preload).length?(f.debug&&console.log("waiting for "+t+" preload..."),p(y.mediaPlayer,y.preload,(function(t){P.apply(void 0,x([t],e))}))):(P.apply(void 0,x([{}],e)),f.debug&&console.log("loaded scene: "+t))}var R=function(){return(R=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function O(t){return void 0===t&&(t={}),R({x:0,y:0,width:0,height:0,centerX:function(t){var e=t.x+t.width/2;this.x=e-this.width/2}},t)}var j=function(){return(j=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function A(t,e){if(t[e])return!0;throw new Error('Font does not contain the character "'+e+'"')}function C(t,e,i,s,n){for(var o=0,r=0,a=e.config.ppp,f=0;f<n.tile.length;f++)1===n.tile[f]&&e.context[t].fillRect((i+o+n.offsetX)*a,(s+r+n.offsetY)*a,a,a),o===n.width-1?(o=0,r++):o++}function E(t,e,i,s,n,o){for(var r=n.split(""),a=i,f=s,c=0;c<r.length;c++){var h=r[c];A(o.font,h)&&(C(t,e,a,f,o.font[h]),a+=o.font[h].width),a+=o.tracking}}function D(t,e,i){for(var s=[],n=t.split(" "),o="",r=0,a=0;a<n.length;a++){for(var f=n[a],c=0,h=0,l=f.split("");h<l.length;h++){var u=l[h];if(A(e.font,u)){var g=e.font[u];c+=g.width+g.offsetX+e.tracking}}(r+=c)<=i?o+=f+" ":(s.push(o),o=f+" ",r=c)}return s.push(o),s}var K=function(){return(K=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function M(t){void 0===t&&(t={});var e=O({width:t.metaTile.width,height:t.metaTile.height}),i=function(t){return void 0===t&&(t={}),j({color:"#06f",rectangle:O(t.rectangle),draw:function(t,e){if(f.debug){console.log("hitBox.draw()");var i=e.config.ppp;e.context[t].globalAlpha=.4,e.context[t].fillStyle=this.color,e.context[t].fillRect(this.rectangle.x*i,this.rectangle.y*i,this.rectangle.width*i,this.rectangle.height*i)}},hit:function(t){return!1}},t)}({rectangle:e});return K({visible:!0,metaTile:null,rectangle:e,hitBox:i,draw:function(t,s){this.visible&&(f.debug&&console.log("metaTileSprite.draw()"),function(t,s){i.rectangle.x=e.x,i.rectangle.x=e.x,i.draw(t,s)}(t,s),function(t,e,i,s,n){var o=0,r=0,a=e.config.ppp,f=n.tiles[n.frame];e.context[t].globalAlpha=1;for(var c=0;c<f.length;c++){var h=f[c];h&&(e.context[t].fillStyle=h,e.context[t].fillRect((i+o)*a,(s+r)*a,a,a)),o===n.width-1?(o=0,r++):o++}}(t,s,this.rectangle.x,this.rectangle.y,this.metaTile))},createAnimation:function(t,e,i,s){var n=this,o=!0,r=!1,a=t,f=0;return{start:function(){o=!0},stop:function(t){t&&(a=t>0?t:e),o=!1},update:function(c,h){f<i?f++:(o&&(a=Math.min(e,++a)),r&&("loop"===s?a=t:"function"==typeof s&&s(),r=!1),f=0),o&&a===e&&(r=!0),n.metaTile.frame=a,n.draw(c,h)}}}},t)}function W(t){void 0===t&&(t={});var e=O({width:t.maxWidth||function(t,e){for(var i=0,s=0,n=t.split("");s<n.length;s++){var o=n[s];if(A(e.font,o)){var r=e.font[o];i+=r.width+r.offsetX+e.tracking}}return i}(t.value,t.options)});return K({color:"#000",value:"",maxWidth:null,visible:!0,options:{font:null,tracking:0,lineHeight:0},rectangle:e,draw:function(t,e){if(this.visible)if(f.debug&&console.log("textSprite.draw()"),e.context[t].fillStyle=this.color,this.maxWidth)for(var i=D(this.value,this.options,this.maxWidth),s=this.rectangle.y,n=0,o=i;n<o.length;n++){var r=o[n];E(t,e,this.rectangle.x,s,r,this.options),s+=this.options.lineHeight}else E(t,e,this.rectangle.x,this.rectangle.y,this.value,this.options)},createAnimation:function(t,e,i,s){var n=this,o=n.value.split("").length,r=0,a=t,c=!1,h=!0;return e=e>0?e:o,{start:function(){h=!0},stop:function(t){t&&(a=t>0?t:o),h=!1},update:function(o,l){if(n.visible)if(l.context[o].fillStyle=n.color,r<i?r++:(h&&(a=Math.min(e,++a)),c&&("loop"===s?a=t:"function"==typeof s&&s(),c=!1),r=0),h&&a===e&&(c=!0),f.debug&&console.log("metaTileSprite.draw()"),n.maxWidth)for(var u=D(n.value,n.options,n.maxWidth),g=n.rectangle.y,p=0,d=0,w=u;d<w.length;d++){var v=w[d];if(!(p+v.length<a)){E(o,l,n.rectangle.x,g,v.slice(0,a-p),n.options),p+=a-p;break}E(o,l,n.rectangle.x,g,v,n.options),p+=v.length,g+=n.options.lineHeight}else E(o,l,n.rectangle.x,n.rectangle.y,n.value.slice(0,a),n.options)}}}},t)}var z={font:i(0),tracking:1,lineHeight:10};function G(t){var e=O({width:t.canvas.config.width});t.staticSprites.controls.rectangle.centerX(e),t.staticSprites.controls.rectangle.y=18,t.sprites.anyKey.rectangle.centerX(e),t.sprites.anyKey.rectangle.y=206}var B={ticksPerBlink:16,tickCount:0,update:function(t){this.tickCount<this.ticksPerBlink?this.tickCount++:(t.sprites.anyKey.visible=!t.sprites.anyKey.visible,this.tickCount=0)}},N={name:"splash",bgColor:"#000",preload:{controls:"src/scenes/assets/splash/controls.json"},init:function(){var t=this;B.tickCount=0,this.controls.keyDown=function(){t.changeScene("title")},this.staticSprites.controls=M({metaTile:this.metaTiles.controls}),this.sprites.anyKey=W({color:"#fff",options:z,value:"PRESS ANY KEY TO CONTINUE"}),G(this)},update:function(){B.update(this)},onResize:function(){G(this)}},U={name:"loading",bgColor:"#000",init:function(){this.sprites.loadingText=W({color:"#fff",options:z,value:"LOADING"});var t=W({color:"#fff",options:z,value:"..."});this.animations.ellipsis=t.createAnimation(0,null,16,"loop");var e=this.canvas.config.height-(this.sprites.loadingText.rectangle.height+16);this.sprites.loadingText.rectangle.x=this.canvas.config.width-(this.sprites.loadingText.rectangle.width+t.rectangle.width+8),this.sprites.loadingText.rectangle.y=e,t.rectangle.x=this.sprites.loadingText.rectangle.x+this.sprites.loadingText.rectangle.width,t.rectangle.y=e}};function H(t){var e=O({width:t.canvas.config.width,height:t.canvas.config.height});t.staticSprites.titleText.rectangle.centerX(e),t.staticSprites.startGame.rectangle.centerX(e),t.staticSprites.about.rectangle.centerX(e),t.staticSprites.copyright.rectangle.centerX(e),t.staticSprites.titleText.rectangle.y=18,t.staticSprites.startGame.rectangle.y=154,t.staticSprites.about.rectangle.y=t.staticSprites.startGame.rectangle.y+19,t.staticSprites.copyright.rectangle.y=e.height-16}var _={index:0,items:["startGame","about"]},L={offsetX:7,offsetY:1,ticksPerBlink:16,tickCount:0,update:function(t,e){this.tickCount<this.ticksPerBlink?this.tickCount++:(t.sprites.cursor.visible=!t.sprites.cursor.visible,this.tickCount=0),t.sprites.cursor.rectangle.x=e.x-t.sprites.cursor.rectangle.width-this.offsetX,t.sprites.cursor.rectangle.y=e.y-this.offsetY}},F={name:"title",bgColor:"#000",preload:{theme:"src/scenes/assets/title/theme.mp3",select:"src/scenes/assets/title/select.mp3",titleText:"src/scenes/assets/title/title-text.json",cursor:"src/scenes/assets/title/cursor.json"},init:function(){var t=this;_.index=0,L.tickCount=0,this.staticSprites.titleText=M({metaTile:this.metaTiles.titleText}),this.staticSprites.startGame=W({color:"#fff",options:z,value:"START GAME"}),this.staticSprites.about=W({color:"#fff",options:z,value:"ABOUT"}),this.staticSprites.copyright=W({color:"#fff",options:z,value:"2021 COSMIC POLYGON"}),H(this),this.sprites.cursor=M({metaTile:this.metaTiles.cursor});var e=function(){m.pauseAll(),m.play("select",!1,(function(){switch(_.index){case 0:console.log(t.changeScene("intro"));break;case 1:console.log(t.changeScene("about"))}}))};this.controls.upPress=function(){_.index>0&&_.index--},this.controls.downPress=function(){_.index<_.items.length-1&&_.index++},this.controls.aPress=function(){e()},this.controls.startPress=function(){e()},m.play("theme",!0)},update:function(){L.update(this,this.staticSprites[_.items[_.index]].rectangle)},onResize:function(){H(this)}},J=function(t){void 0===t&&(t={});var e=s({ppp:1,width:320,height:240},t);function i(t){var i=document.createElement("canvas");i.id=t,i.width=e.width,i.height=e.height,i.style.position="absolute";var s=i.getContext("2d");return s.imageSmoothingEnabled=!1,{element:i,context:s}}var n=i("static"),o=i("dynamic");return document.body.style.margin="0",document.body.style.backgroundColor="#000",document.body.appendChild(n.element),document.body.appendChild(o.element),{element:{static:n.element,dynamic:o.element},context:{static:n.context,dynamic:o.context},config:e,clear:function(t,e){var i=this.config.width,s=this.config.height,n=this.config.ppp;e?(this.context[t].fillStyle=e,this.context[t].fillRect(0,0,i*n,s*n)):this.context[t].clearRect(0,0,i*n,s*n)},getScaleFactor:function(t,e){var i,s=t>e,n=this.config.width>this.config.height;return i=s?n&&this.config.height*(t/this.config.width)<=e?t/this.config.width:e/this.config.height:!n&&this.config.width*(e/this.config.height)<=t?e/this.config.height:t/this.config.width,Math.floor(i)},fitToViewport:function(){var t=window.innerWidth,e=window.innerHeight,i=this.getScaleFactor(t,e);for(var s in this.config.ppp=i,this.element){var n=this.element[s];n.width=this.config.width*i,n.height=this.config.height*i,n.style.top=e/2-n.height/2+"px",n.style.left=t/2-n.width/2+"px"}"function"==typeof this.onResize&&this.onResize()},onResize:null}}();J.fitToViewport(),window.onresize=function(){return J.fitToViewport()},function(t,e,i){for(var s,n=[],o=3;o<arguments.length;o++)n[o-3]=arguments[o];for(var r in t){var a=t[r];a=b(b({},a),{animations:{},canvas:i,config:f,controls:v,metaTiles:{},mediaPlayer:m,sprites:{},staticSprites:{}}),X[r]=a}X.loading&&(s=X.loading).init.apply(s,n),T.apply(void 0,x([e],n))}({loading:U,splash:N,title:F},"splash",J),a=function(){var t;t=J,k?(Y(X.loading),S(X.loading,t)):("function"==typeof y.update&&y.update(t),y.controls.update(),S(y,t))},n=Date.now(),c=!0,l()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9jb25maWcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9sb29wLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdGlsZUxvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2Fzc2V0TG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vY29udHJvbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi9tZWRpYVBsYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3NjZW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vcmVjdGFuZ2xlLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21tb24vdGV4dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL3Nwcml0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2hpdEJveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL21ldGFUaWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9zY2VuZXMvY29tbW9uL3RleHRPcHRpb25zLnRzIiwid2VicGFjazovLy8uL3NyYy9zY2VuZXMvc3BsYXNoL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9zY2VuZXMvbG9hZGluZy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NlbmVzL3RpdGxlL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tbW9uL2NhbnZhcy50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRoZW4iLCJlbGFwc2VkIiwibm93IiwiY2FsbGJhY2siLCJjb25maWciLCJkZWJ1ZyIsImNhblVwZGF0ZSIsInVwZGF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIkRhdGUiLCJjb25zb2xlIiwibG9nIiwidGlsZUxvYWRlciIsInBhdGhzIiwib25Db21wbGV0ZSIsInRyYWNrQ291bnQiLCJrZXlzIiwibGVuZ3RoIiwidGlsZXMiLCJsb2FkZWRDb3VudCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib25sb2FkIiwic3RhdHVzIiwiZXJyb3IiLCJyZXNwb25zZVRleHQiLCJFcnJvciIsIkpTT04iLCJwYXJzZSIsIm9wZW4iLCJzZW5kIiwiZ2V0UGF0aHNPZlR5cGUiLCJ0eXBlIiwicGF0aHNPZlR5cGUiLCJwYXRoIiwiZW5kc1dpdGgiLCJhc3NldExvYWRlciIsIm1lZGlhUGxheWVyIiwidGlsZXNDb21wbGV0ZSIsImxvYWQiLCJub29wIiwiZXZlbnRRdWV1ZSIsImNvbnRyb2xzIiwidXBQcmVzcyIsImxlZnRQcmVzcyIsImRvd25QcmVzcyIsInJpZ2h0UHJlc3MiLCJhUHJlc3MiLCJiUHJlc3MiLCJzZWxlY3RQcmVzcyIsInN0YXJ0UHJlc3MiLCJ1cFJlbGVhc2UiLCJsZWZ0UmVsZWFzZSIsImRvd25SZWxlYXNlIiwicmlnaHRSZWxlYXNlIiwiYVJlbGVhc2UiLCJiUmVsZWFzZSIsInNlbGVjdFJlbGVhc2UiLCJzdGFydFJlbGVhc2UiLCJrZXlEb3duIiwia2V5VXAiLCJyZXNldCIsImV2ZW50TmFtZSIsImRvY3VtZW50Iiwib25rZXlkb3duIiwiZSIsInByZXZlbnREZWZhdWx0IiwicHVzaCIsIm1ldGFLZXkiLCJvbmtleXVwIiwiY3VycmVudFNjZW5lIiwidHJhY2tzIiwib25Mb2FkZWQiLCJhdWRpbyIsIkF1ZGlvIiwidGhpcyIsInNyYyIsIm9uY2FucGxheXRocm91Z2giLCJwbGF5IiwibG9vcCIsIm9uZW5kZWQiLCJwYXVzZSIsInBhdXNlQWxsIiwic2NlbmVzIiwiaXNMb2FkaW5nIiwiZHJhd1N0YXRpY0l0ZW1zIiwic2NlbmUiLCJjYW52YXMiLCJjbGVhciIsImJnQ29sb3IiLCJ2YWx1ZXMiLCJzdGF0aWNTcHJpdGVzIiwiZm9yRWFjaCIsInNwcml0ZSIsImRyYXciLCJkcmF3RHluYW1pY0l0ZW1zIiwiYW5pbWF0aW9ucyIsImFuaW1hdGlvbiIsInNwcml0ZXMiLCJzY2VuZVJlYWR5IiwibWV0YVRpbGVzIiwiaW5pdCIsImFyZ3MiLCJvblJlc2l6ZSIsImxvYWRTY2VuZSIsImRlc3Ryb3kiLCJjaGFuZ2VTY2VuZSIsInByZWxvYWQiLCJjcmVhdGVSZWN0YW5nbGUiLCJwYXJhbXMiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiY2VudGVyWCIsImJhc2UiLCJyZWxhdGl2ZUNlbnRlciIsImNoYXJhY3RlckRvZXNFeGlzdCIsImZvbnQiLCJjaGFyIiwiZHJhd0NoYXJhY3RlciIsImNoYXJYIiwiY2hhclkiLCJwcHAiLCJ0aWxlIiwiY29udGV4dCIsImZpbGxSZWN0Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJkcmF3VGV4dExpbmUiLCJsaW5lWCIsImxpbmVZIiwidGV4dCIsIm9wdGlvbnMiLCJjaGFyYWN0ZXJzIiwic3BsaXQiLCJ0cmFja2luZyIsImdldExpbmVzIiwibWF4V2lkdGgiLCJsaW5lcyIsIndvcmRzIiwibGluZSIsImxpbmVXaWR0aCIsIndvcmQiLCJ3b3JkV2lkdGgiLCJ3b3JkQ2hhciIsImNyZWF0ZU1ldGFUaWxlU3ByaXRlIiwicmVjdGFuZ2xlIiwibWV0YVRpbGUiLCJoaXRCb3giLCJjb2xvciIsImdsb2JhbEFscGhhIiwiZmlsbFN0eWxlIiwiaGl0IiwiY3JlYXRlSGl0Qm94IiwidmlzaWJsZSIsInVwZGF0ZUhpdEJveCIsInRpbGVYIiwidGlsZVkiLCJmcmFtZSIsImhleCIsImRyYXdUaWxlIiwiY3JlYXRlQW5pbWF0aW9uIiwic3RhcnRGcmFtZSIsImVuZEZyYW1lIiwidGlja0ludGVydmFsIiwiY2FuQWR2YW5jZSIsIndpbGxIYW5kbGVDb21wbGV0ZSIsImN1cnJlbnRGcmFtZSIsInRpY2tDb3VudCIsInN0YXJ0Iiwic3RvcCIsImdvdG9GcmFtZSIsIk1hdGgiLCJtaW4iLCJjcmVhdGVUZXh0U3ByaXRlIiwiZ2V0TGluZUxlbmd0aCIsImxpbmVIZWlnaHQiLCJzdGFydENoYXIiLCJlbmRDaGFyIiwiY2hhckxlbiIsImRyYXdhYmxlQ2hhckxlbiIsImdvdG9DaGFyIiwiZHJhd25DaGFyTGVuIiwic2xpY2UiLCJ0ZXh0T3B0aW9ucyIsInBsYWNlSXRlbXMiLCJjYW52YXNSZWN0YW5nbGUiLCJhbnlLZXkiLCJ0aWNrc1BlckJsaW5rIiwic3BsYXNoIiwibG9hZGluZyIsImxvYWRpbmdUZXh0IiwiZWxsaXBzaXMiLCJ0ZXh0WSIsInBsYWNlU3RhdGljSXRlbXMiLCJ0aXRsZVRleHQiLCJzdGFydEdhbWUiLCJhYm91dCIsImNvcHlyaWdodCIsInNlbGVjdGlvbiIsImluZGV4IiwiaXRlbXMiLCJjdXJzb3IiLCJzZWxlY3RlZFJlY3RhbmdsZSIsInRpdGxlIiwiaGFuZGxlU2VsZWN0aW9uIiwidXNlckNvbmZpZyIsImNhbnZhc0ZhY3RvcnkiLCJpZCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsImdldENvbnRleHQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJzdGF0aWN1bGFyIiwiZHluYW1pYyIsImJvZHkiLCJtYXJnaW4iLCJiYWNrZ3JvdW5kQ29sb3IiLCJhcHBlbmRDaGlsZCIsInN0YXRpYyIsImNvbG91ciIsImNsZWFyUmVjdCIsImdldFNjYWxlRmFjdG9yIiwidmlld3BvcnRXaWR0aCIsInZpZXdwb3J0SGVpZ2h0IiwicGl4ZWxzUGVyUGl4ZWwiLCJ2aWV3cG9ydElzTGFuZHNjYXBlIiwiY2FudmFzSXNMYW5kc2NhcGUiLCJmbG9vciIsImZpdFRvVmlld3BvcnQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJzY2FsZUZhY3RvciIsInRvcCIsImxlZnQiLCJjcmVhdGVDYW52YXMiLCJvbnJlc2l6ZSIsInNjZW5lT2JqIiwiaW5pdGlhbFNjZW5lTmFtZSIsImluaXRpYWxBcmdzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFN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VjBELFVBQVcsR0FDWC9ELFlBQWEsRUFDYjZELFFBQVMsR0FDVFAsY0FBZSxLQUdqQlIsRUFBTyxHQUFRRyxFQUdiSCxFQUFPNEcsVUFDVCxFQUFBNUcsRUFBTzRHLFNBQVExRixLQUFJLFFBQUk4SSxHQUd6QjNJLEVBQVMsZ0JBQUMwSSxHQUFxQkMsSVU3SGpDLENBQVcsQ0FDVHBELFFBQU8sRUFDUEQsT0FBTSxFQUNOZSxNQUFLLEdBQ0osU0FBVSxHZm9CWDFNLEVlbEJRLFdWOEhILElBQWlCb0YsSVU3SFQsRVY4SFRILEdBQ0ZDLEVBQWdCRixFQUFPNEcsU0FDdkJoRyxFQUFpQlosRUFBTzRHLFFBQVN4RyxLQUVFLG1CQUF4QmpCLEVBQWEvRCxRQUN0QitELEVBQWEvRCxPQUFPZ0YsR0FHdEJqQixFQUFhNUIsU0FBU25DLFNBQ3RCd0YsRUFBaUJ6QixFQUFjaUIsS0xySGpDdkYsRUFBT1MsS0FBS1AsTUFLWkksR0FBWSxFQUNaQyIsImZpbGUiOiJtYWluLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnIHtcbiAgZGVidWc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWc6IENvbmZpZyA9IHtcbiAgZGVidWc6IGZhbHNlXG59O1xuIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9vcCB7XG4gIHN0YXJ0OiAoKSA9PiB2b2lkO1xuICBzdG9wOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBmcHMgPSAyNDtcbmxldCB0aGVuOiBudW1iZXI7XG5sZXQgZWxhcHNlZDogbnVtYmVyO1xubGV0IG5vdzogbnVtYmVyO1xubGV0IGNhblVwZGF0ZSA9IGZhbHNlO1xubGV0IHRpY2tDb3VudCA9IDA7XG5sZXQgY2FsbGJhY2s6ICgpID0+IHZvaWQ7XG5cbmZ1bmN0aW9uIHVwZGF0ZSAoKTogdm9pZCB7XG4gIGlmICghY2FuVXBkYXRlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSk7XG5cbiAgbm93ID0gRGF0ZS5ub3coKTtcbiAgZWxhcHNlZCA9IG5vdyAtIHRoZW47XG5cbiAgaWYgKGVsYXBzZWQgPiBmcHMpIHtcbiAgICB0aGVuID0gbm93IC0gKGVsYXBzZWQgJSBmcHMpO1xuICAgIFxuICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRpY2tDb3VudCk7XG4gICAgfVxuXG4gICAgY2FsbGJhY2soKTtcblxuICAgIHRpY2tDb3VudCsrO1xuICB9XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCAoY2I6ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgY2FsbGJhY2sgPSBjYjtcbiAgdGhlbiA9IERhdGUubm93KCk7XG4gIHN0YXJ0KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydCAoKTogdm9pZCB7XG4gIGNhblVwZGF0ZSA9IHRydWU7XG4gIHVwZGF0ZSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcCAoKTogdm9pZCB7XG4gIGNhblVwZGF0ZSA9IGZhbHNlO1xufVxuIiwiaW1wb3J0IHsgTWV0YVRpbGUgfSBmcm9tIFwiLi9tZXRhVGlsZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdGlsZUxvYWRlciAoXG4gIHBhdGhzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9LFxuICBvbkNvbXBsZXRlOiAodGlsZXM6IHsgW2tleTogc3RyaW5nXTogTWV0YVRpbGUgfSkgPT4gYW55XG4pOiB2b2lkIHtcbiAgY29uc3QgdHJhY2tDb3VudCA9IE9iamVjdC5rZXlzKHBhdGhzKS5sZW5ndGg7XG4gIGNvbnN0IHRpbGVzOiB7IFtrZXk6IHN0cmluZ106IE1ldGFUaWxlIH0gPSB7fTtcbiAgbGV0IGxvYWRlZENvdW50ID0gMDtcblxuICBpZiAoIXRyYWNrQ291bnQpIHtcbiAgICBvbkNvbXBsZXRlKHt9KTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gb25Mb2FkZWQgKCk6IHZvaWQge1xuICAgIGxvYWRlZENvdW50Kys7XG5cbiAgICBpZiAobG9hZGVkQ291bnQgPT09IHRyYWNrQ291bnQpIHtcbiAgICAgIG9uQ29tcGxldGUodGlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE8gc3dpdGNoIHRvIGFzeW5jL2F3YWl0IGZldGNoKClcbiAgZm9yIChjb25zdCBuYW1lIGluIHBhdGhzKSB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgdGlsZXNbbmFtZV0gPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICBvbkxvYWRlZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcih4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaWxlIFwiJHtuYW1lfVwiIHdhcyBub3QgZm91bmRgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgeGhyLm9wZW4oJ0dFVCcsIHBhdGhzW25hbWVdKTtcbiAgICB4aHIuc2VuZCgpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBNZWRpYVBsYXllciB9IGZyb20gJy4vbWVkaWFQbGF5ZXInO1xuaW1wb3J0IHsgTWV0YVRpbGUgfSBmcm9tICcuL21ldGFUaWxlJztcbmltcG9ydCB7IHRpbGVMb2FkZXIgfSBmcm9tICcuL3RpbGVMb2FkZXInO1xuXG5mdW5jdGlvbiBnZXRQYXRoc09mVHlwZSAoXG4gIHBhdGhzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9LCB0eXBlOiAnLm1wMycgfCAnLmpzb24nXG4pOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcbiAgY29uc3QgcGF0aHNPZlR5cGU6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7fTtcblxuICBmb3IgKGNvbnN0IG5hbWUgaW4gcGF0aHMpIHtcbiAgICBjb25zdCBwYXRoID0gcGF0aHNbbmFtZV07XG5cbiAgICBpZiAocGF0aC5lbmRzV2l0aCh0eXBlKSkge1xuICAgICAgcGF0aHNPZlR5cGVbbmFtZV0gPSBwYXRoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXRoc09mVHlwZTtcbn1cblxuLyoqXG4gKiBtZWRpYSBhbmQganNvbiBmaWxlcyBhcmUgbm90IHBhcmFsbGVsaXplZC4uLiAmc2hydWc7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NldExvYWRlciAoXG4gIG1lZGlhUGxheWVyOiBNZWRpYVBsYXllcixcbiAgcGF0aHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sXG4gIG9uQ29tcGxldGU6ICh0aWxlczogeyBba2V5OiBzdHJpbmddOiBNZXRhVGlsZSB9KSA9PiBhbnlcbik6IHZvaWQge1xuICBmdW5jdGlvbiBtZWRpYUNvbXBsZXRlICgpOiB2b2lkIHtcbiAgICB0aWxlTG9hZGVyKGdldFBhdGhzT2ZUeXBlKHBhdGhzLCAnLmpzb24nKSwgdGlsZXNDb21wbGV0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aWxlc0NvbXBsZXRlICh0aWxlczogeyBba2V5OiBzdHJpbmddOiBNZXRhVGlsZSB9KTogdm9pZCB7XG4gICAgb25Db21wbGV0ZSh0aWxlcyk7XG4gIH1cblxuICBtZWRpYVBsYXllci5sb2FkKGdldFBhdGhzT2ZUeXBlKHBhdGhzLCAnLm1wMycpLCBtZWRpYUNvbXBsZXRlKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgQ29udHJvbHMge1xuICB1cFByZXNzOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgcmlnaHRQcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIGRvd25QcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIGxlZnRQcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIGFQcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIGJQcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIHNlbGVjdFByZXNzOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgc3RhcnRQcmVzczogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG5cbiAgdXBSZWxlYXNlOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgcmlnaHRSZWxlYXNlOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgZG93blJlbGVhc2U6IChlPzogS2V5Ym9hcmRFdmVudCkgPT4gYW55O1xuICBsZWZ0UmVsZWFzZTogKGU/OiBLZXlib2FyZEV2ZW50KSA9PiBhbnk7XG4gIGFSZWxlYXNlOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgYlJlbGVhc2U6IChlPzogS2V5Ym9hcmRFdmVudCkgPT4gYW55O1xuICBzZWxlY3RSZWxlYXNlOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAgc3RhcnRSZWxlYXNlOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcblxuICBrZXlEb3duOiAoZT86IEtleWJvYXJkRXZlbnQpID0+IGFueTtcbiAga2V5VXA6IChlPzogS2V5Ym9hcmRFdmVudCkgPT4gYW55O1xuXG4gIHJlc2V0OiAoKSA9PiB2b2lkO1xuICB1cGRhdGU6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcbmxldCBldmVudFF1ZXVlOiAoa2V5b2YgT21pdDxDb250cm9scywgJ3Jlc2V0JyB8ICd1cGRhdGUnPilbXSA9IFtdO1xuXG5leHBvcnQgY29uc3QgY29udHJvbHM6IENvbnRyb2xzID0ge1xuICB1cFByZXNzOiBub29wLFxuICBsZWZ0UHJlc3M6IG5vb3AsXG4gIGRvd25QcmVzczogbm9vcCxcbiAgcmlnaHRQcmVzczogbm9vcCxcbiAgYVByZXNzOiBub29wLFxuICBiUHJlc3M6IG5vb3AsXG4gIHNlbGVjdFByZXNzOiBub29wLFxuICBzdGFydFByZXNzOiBub29wLFxuXG4gIHVwUmVsZWFzZTogbm9vcCxcbiAgbGVmdFJlbGVhc2U6IG5vb3AsXG4gIGRvd25SZWxlYXNlOiBub29wLFxuICByaWdodFJlbGVhc2U6IG5vb3AsXG4gIGFSZWxlYXNlOiBub29wLFxuICBiUmVsZWFzZTogbm9vcCxcbiAgc2VsZWN0UmVsZWFzZTogbm9vcCxcbiAgc3RhcnRSZWxlYXNlOiBub29wLFxuXG4gIGtleURvd246IG5vb3AsXG4gIGtleVVwOiBub29wLFxuXG4gIHJlc2V0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgY29udHJvbHMudXBQcmVzcyA9IG5vb3A7XG4gICAgY29udHJvbHMubGVmdFByZXNzID0gbm9vcDtcbiAgICBjb250cm9scy5kb3duUHJlc3MgPSBub29wO1xuICAgIGNvbnRyb2xzLnJpZ2h0UHJlc3MgPSBub29wO1xuICAgIGNvbnRyb2xzLmFQcmVzcyA9IG5vb3A7XG4gICAgY29udHJvbHMuYlByZXNzID0gbm9vcDtcbiAgICBjb250cm9scy5zZWxlY3RQcmVzcyA9IG5vb3A7XG4gICAgY29udHJvbHMuc3RhcnRQcmVzcyA9IG5vb3A7XG4gIFxuICAgIGNvbnRyb2xzLnVwUmVsZWFzZSA9IG5vb3A7XG4gICAgY29udHJvbHMubGVmdFJlbGVhc2UgPSBub29wO1xuICAgIGNvbnRyb2xzLmRvd25SZWxlYXNlID0gbm9vcDtcbiAgICBjb250cm9scy5yaWdodFJlbGVhc2UgPSBub29wO1xuICAgIGNvbnRyb2xzLmFSZWxlYXNlID0gbm9vcDtcbiAgICBjb250cm9scy5iUmVsZWFzZSA9IG5vb3A7XG4gICAgY29udHJvbHMuc2VsZWN0UmVsZWFzZSA9IG5vb3A7XG4gICAgY29udHJvbHMuc3RhcnRSZWxlYXNlID0gbm9vcDtcbiAgXG4gICAgY29udHJvbHMua2V5RG93biA9IG5vb3A7XG4gICAgY29udHJvbHMua2V5VXAgPSBub29wO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZXZlbnROYW1lIG9mIGV2ZW50UXVldWUpIHtcbiAgICAgIGNvbnRyb2xzW2V2ZW50TmFtZV0oKTtcbiAgICB9XG4gIFxuICAgIGV2ZW50UXVldWUgPSBbXTtcbiAgfVxufVxuXG5kb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgc3dpdGNoKGUua2V5KSB7XG4gICAgY2FzZSAndyc6XG4gICAgY2FzZSAnVyc6XG4gICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ3VwUHJlc3MnKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2QnOlxuICAgIGNhc2UgJ0QnOlxuICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdyaWdodFByZXNzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdzJzpcbiAgICBjYXNlICdTJzpcbiAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdkb3duUHJlc3MnKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2EnOlxuICAgIGNhc2UgJ0EnOlxuICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ2xlZnRQcmVzcycpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICdqJzpcbiAgICBjYXNlICdKJzpcbiAgICBjYXNlICd6JzpcbiAgICBjYXNlICdaJzpcbiAgICAgIGV2ZW50UXVldWUucHVzaCgnYVByZXNzJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdrJzpcbiAgICBjYXNlICdLJzpcbiAgICBjYXNlICd4JzpcbiAgICBjYXNlICdYJzpcbiAgICAgIGV2ZW50UXVldWUucHVzaCgnYlByZXNzJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJyAnOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdzZWxlY3RQcmVzcycpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnRW50ZXInOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdzdGFydFByZXNzJyk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmICghZS5tZXRhS2V5KSB7XG4gICAgZXZlbnRRdWV1ZS5wdXNoKCdrZXlEb3duJyk7XG4gIH1cbn07XG5cbmRvY3VtZW50Lm9ua2V5dXAgPSBmdW5jdGlvbiAoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgc3dpdGNoKGUua2V5KSB7XG4gICAgY2FzZSAndyc6XG4gICAgY2FzZSAnVyc6XG4gICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ3VwUmVsZWFzZScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZCc6XG4gICAgY2FzZSAnRCc6XG4gICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ3JpZ2h0UmVsZWFzZScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncyc6XG4gICAgY2FzZSAnUyc6XG4gICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgIGV2ZW50UXVldWUucHVzaCgnZG93blJlbGVhc2UnKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2EnOlxuICAgIGNhc2UgJ0EnOlxuICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ2xlZnRSZWxlYXNlJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2onOlxuICAgIGNhc2UgJ0onOlxuICAgIGNhc2UgJ3onOlxuICAgIGNhc2UgJ1onOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdhUmVsZWFzZScpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnayc6XG4gICAgY2FzZSAnSyc6XG4gICAgY2FzZSAneCc6XG4gICAgY2FzZSAnWCc6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ2JSZWxlYXNlJyk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJyAnOlxuICAgICAgZXZlbnRRdWV1ZS5wdXNoKCdzZWxlY3RSZWxlYXNlJyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdFbnRlcic6XG4gICAgICBldmVudFF1ZXVlLnB1c2goJ3N0YXJ0UmVsZWFzZScpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICBpZiAoIWUubWV0YUtleSkge1xuICAgIGV2ZW50UXVldWUucHVzaCgna2V5VXAnKTsgIFxuICB9XG59O1xuIiwidHlwZSBUcmFja3MgPSB7IFtuYW1lOiBzdHJpbmddOiBIVE1MQXVkaW9FbGVtZW50IH07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVkaWFQbGF5ZXIge1xuICB0cmFja3M6IFRyYWNrcyxcblxuICBsb2FkOiAocGF0aHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sIG9uQ29tcGxldGU6ICgpID0+IGFueSkgPT4gdm9pZDtcbiAgcGxheTogKG5hbWU6IHN0cmluZywgbG9vcD86IGJvb2xlYW4sIG9uQ29tcGxldGU/OiAoKSA9PiBhbnkpID0+IHZvaWQ7XG4gIHBhdXNlOiAobmFtZTogc3RyaW5nKSA9PiB2b2lkO1xuICBwYXVzZUFsbDogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IG1lZGlhUGxheWVyOiBNZWRpYVBsYXllciA9IHtcbiAgdHJhY2tzOiB7fSxcblxuICBsb2FkOiBmdW5jdGlvbiAocGF0aHM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0sIG9uQ29tcGxldGU6ICgpID0+IGFueSk6IHZvaWQge1xuICAgIGNvbnN0IHRyYWNrQ291bnQgPSBPYmplY3Qua2V5cyhwYXRocykubGVuZ3RoO1xuICAgIGxldCBsb2FkZWRDb3VudCA9IDA7XG5cbiAgICBpZiAoIXRyYWNrQ291bnQpIHtcbiAgICAgIG9uQ29tcGxldGUoKTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gb25Mb2FkZWQgKCk6IHZvaWQge1xuICAgICAgbG9hZGVkQ291bnQrKztcblxuICAgICAgaWYgKGxvYWRlZENvdW50ID09PSB0cmFja0NvdW50KSB7XG4gICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcGF0aHMpIHtcbiAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEF1ZGlvKCk7XG4gICAgICB0aGlzLnRyYWNrc1tuYW1lXSA9IGF1ZGlvO1xuXG4gICAgICBhdWRpby5zcmMgPSBwYXRoc1tuYW1lXTtcbiAgICAgIGF1ZGlvLm9uY2FucGxheXRocm91Z2ggPSBvbkxvYWRlZDtcbiAgICB9XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKG5hbWU6IHN0cmluZywgbG9vcDogYm9vbGVhbiA9IGZhbHNlLCBvbkNvbXBsZXRlPzogKCkgPT4gYW55KTogdm9pZCB7XG4gICAgaWYgKG9uQ29tcGxldGUpIHtcbiAgICAgIHRoaXMudHJhY2tzW25hbWVdLm9uZW5kZWQgPSAoKSA9PiB7XG4gICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgdGhpcy50cmFja3NbbmFtZV0ub25lbmRlZCA9IG51bGw7XG4gICAgICB9O1xuICAgIH1cbiAgICB0aGlzLnRyYWNrc1tuYW1lXS5sb29wID0gbG9vcDtcbiAgICB0aGlzLnRyYWNrc1tuYW1lXS5wbGF5KCk7XG4gIH0sXG5cbiAgcGF1c2U6IGZ1bmN0aW9uIChuYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnRyYWNrc1tuYW1lXS5wYXVzZSgpO1xuICB9LFxuXG4gIHBhdXNlQWxsOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMudHJhY2tzKSB7XG4gICAgICB0aGlzLnRyYWNrc1tuYW1lXS5wYXVzZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgQW5pbWF0aW9uIH0gZnJvbSBcIi4vYW5pbWF0aW9uXCI7XG5pbXBvcnQgeyBhc3NldExvYWRlciB9IGZyb20gXCIuL2Fzc2V0TG9hZGVyXCI7XG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tIFwiLi9jYW52YXNcIjtcbmltcG9ydCB7IENvbmZpZywgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBjb250cm9scywgQ29udHJvbHMgfSBmcm9tIFwiLi9jb250cm9sc1wiO1xuaW1wb3J0IHsgbWVkaWFQbGF5ZXIsIE1lZGlhUGxheWVyIH0gZnJvbSBcIi4vbWVkaWFQbGF5ZXJcIjtcbmltcG9ydCB7IE1ldGFUaWxlIH0gZnJvbSBcIi4vbWV0YVRpbGVcIjtcbmltcG9ydCB7IE1ldGFUaWxlU3ByaXRlLCBUZXh0U3ByaXRlIH0gZnJvbSBcIi4vc3ByaXRlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NlbmUge1xuICBhbmltYXRpb25zPzogeyBba2V5OiBzdHJpbmddOiBBbmltYXRpb24gfTtcbiAgYmdDb2xvcj86IHN0cmluZztcbiAgY2FudmFzPzogQ2FudmFzO1xuICBjb25maWc/OiBDb25maWc7XG4gIGNvbnRyb2xzPzogQ29udHJvbHM7XG4gIG1ldGFUaWxlcz86IHsgW2tleTogc3RyaW5nXTogTWV0YVRpbGUgfTtcbiAgbWVkaWFQbGF5ZXI/OiBNZWRpYVBsYXllcjtcbiAgcHJlbG9hZD86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIHN0YXRpY1Nwcml0ZXM/OiB7IFtrZXk6IHN0cmluZ106IFRleHRTcHJpdGUgfCBNZXRhVGlsZVNwcml0ZSB9O1xuICBzcHJpdGVzPzogeyBba2V5OiBzdHJpbmddOiBUZXh0U3ByaXRlIHwgTWV0YVRpbGVTcHJpdGUgfTtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgaW5pdDogKC4uLmFyZ3M6IGFueSkgPT4gdm9pZDtcbiAgY2hhbmdlU2NlbmU/OiAobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnkpID0+IHZvaWQ7XG4gIGRlc3Ryb3k/OiAoKSA9PiB2b2lkO1xuICBvblJlc2l6ZT86ICgpID0+IHZvaWQ7XG4gIHVwZGF0ZT86IChjYW52YXM6IENhbnZhcykgPT4gdm9pZDtcbn1cblxubGV0IGN1cnJlbnRTY2VuZTogU2NlbmU7XG5sZXQgc2NlbmVzOiB7IFtuYW1lOiBzdHJpbmddOiBTY2VuZSB9ID0ge307XG5sZXQgaXNMb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGRyYXdTdGF0aWNJdGVtcyAoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gIHNjZW5lLmNhbnZhcy5jbGVhcignc3RhdGljJywgc2NlbmUuYmdDb2xvcik7XG5cbiAgT2JqZWN0LnZhbHVlcyhzY2VuZS5zdGF0aWNTcHJpdGVzKS5mb3JFYWNoKChzcHJpdGU6IE1ldGFUaWxlU3ByaXRlIHwgVGV4dFNwcml0ZSkgPT4ge1xuICAgIHNwcml0ZS5kcmF3KCdzdGF0aWMnLCBzY2VuZS5jYW52YXMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZHJhd0R5bmFtaWNJdGVtcyAoc2NlbmU6IFNjZW5lLCBjYW52YXM6IENhbnZhcyk6IHZvaWQge1xuICBzY2VuZS5jYW52YXMuY2xlYXIoJ2R5bmFtaWMnKTtcblxuICBPYmplY3QudmFsdWVzKHNjZW5lLmFuaW1hdGlvbnMpLmZvckVhY2goKGFuaW1hdGlvbjogQW5pbWF0aW9uKSA9PiB7XG4gICAgYW5pbWF0aW9uLnVwZGF0ZSgnZHluYW1pYycsIGNhbnZhcyk7XG4gIH0pO1xuICBPYmplY3QudmFsdWVzKHNjZW5lLnNwcml0ZXMpLmZvckVhY2goKHNwcml0ZTogTWV0YVRpbGVTcHJpdGUgfCBUZXh0U3ByaXRlKSA9PiB7XG4gICAgc3ByaXRlLmRyYXcoJ2R5bmFtaWMnLCBjYW52YXMpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc2NlbmVSZWFkeSAobWV0YVRpbGVzPzogeyBba2V5OiBzdHJpbmddOiBNZXRhVGlsZSB9LCAuLi5hcmdzOiBhbnkpOiB2b2lkIHtcbiAgY3VycmVudFNjZW5lLm1ldGFUaWxlcyA9IG1ldGFUaWxlcztcblxuICBjdXJyZW50U2NlbmUuaW5pdCguLi5hcmdzKTtcbiAgZHJhd1N0YXRpY0l0ZW1zKGN1cnJlbnRTY2VuZSk7XG4gIGN1cnJlbnRTY2VuZS5jYW52YXMub25SZXNpemUgPSAoKSA9PiB7XG4gICAgY3VycmVudFNjZW5lLm9uUmVzaXplKCk7XG4gICAgZHJhd1N0YXRpY0l0ZW1zKGN1cnJlbnRTY2VuZSk7XG4gIH1cblxuICBpc0xvYWRpbmcgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbG9hZFNjZW5lKG5hbWU6IHN0cmluZywgLi4uYXJnczogYW55KTogdm9pZCB7XG4gIGlmICghc2NlbmVzW25hbWVdKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBzY2VuZSBcIiR7bmFtZX1cIiBkb2VzIG5vdCBleGlzdGApO1xuICB9XG5cbiAgaXNMb2FkaW5nID0gdHJ1ZTtcblxuICBpZiAoY3VycmVudFNjZW5lKSB7XG4gICAgY3VycmVudFNjZW5lLmFuaW1hdGlvbnMgPSB7fTtcbiAgICBjdXJyZW50U2NlbmUubWV0YVRpbGVzID0ge307XG4gICAgY3VycmVudFNjZW5lLnNwcml0ZXMgPSB7fTtcbiAgICBjdXJyZW50U2NlbmUuc3RhdGljU3ByaXRlcyA9IHt9O1xuXG4gICAgY3VycmVudFNjZW5lLmNvbnRyb2xzLnJlc2V0KCk7XG5cbiAgICBpZiAodHlwZW9mIGN1cnJlbnRTY2VuZS5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjdXJyZW50U2NlbmUuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxuXG4gIGN1cnJlbnRTY2VuZSA9IHNjZW5lc1tuYW1lXTtcbiAgY3VycmVudFNjZW5lLmNoYW5nZVNjZW5lID0gbG9hZFNjZW5lO1xuXG4gIGlmIChjdXJyZW50U2NlbmUucHJlbG9hZCAmJiBPYmplY3Qua2V5cyhjdXJyZW50U2NlbmUucHJlbG9hZCkubGVuZ3RoKSB7XG4gICAgaWYgKGNvbmZpZy5kZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coYHdhaXRpbmcgZm9yICR7bmFtZX0gcHJlbG9hZC4uLmApO1xuICAgIH1cblxuICAgIGFzc2V0TG9hZGVyKGN1cnJlbnRTY2VuZS5tZWRpYVBsYXllciwgY3VycmVudFNjZW5lLnByZWxvYWQsIChtZXRhVGlsZXM/OiB7IFtrZXk6IHN0cmluZ106IE1ldGFUaWxlIH0pID0+IHtcbiAgICAgIHNjZW5lUmVhZHkobWV0YVRpbGVzLCAuLi5hcmdzKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBzY2VuZVJlYWR5KHt9LCAuLi5hcmdzKTtcblxuICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBsb2FkZWQgc2NlbmU6ICR7bmFtZX1gKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBzY2VuZU9iaiBcbiAqIEBwYXJhbSBpbml0aWFsU2NlbmVOYW1lIFxuICogQHBhcmFtIGNhbnZhcyBcbiAqIEBwYXJhbSBpbml0aWFsQXJncyBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluaXQgKFxuICBzY2VuZU9iajogeyBbbmFtZTogc3RyaW5nXTogU2NlbmUgfSxcbiAgaW5pdGlhbFNjZW5lTmFtZTogc3RyaW5nLFxuICBjYW52YXM6IENhbnZhcyxcbiAgLi4uaW5pdGlhbEFyZ3M6IGFueSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG5hbWUgaW4gc2NlbmVPYmopIHtcbiAgICBsZXQgc2NlbmU6IFNjZW5lID0gc2NlbmVPYmpbbmFtZV07XG5cbiAgICBzY2VuZSA9IHtcbiAgICAgIC4uLnNjZW5lLFxuICAgICAgYW5pbWF0aW9uczoge30sXG4gICAgICBjYW52YXM6IGNhbnZhcyxcbiAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgY29udHJvbHM6IGNvbnRyb2xzLFxuICAgICAgbWV0YVRpbGVzOiB7fSxcbiAgICAgIG1lZGlhUGxheWVyOiBtZWRpYVBsYXllcixcbiAgICAgIHNwcml0ZXM6IHt9LFxuICAgICAgc3RhdGljU3ByaXRlczoge31cbiAgICB9O1xuXG4gICAgc2NlbmVzW25hbWVdID0gc2NlbmU7XG4gIH1cblxuICBpZiAoc2NlbmVzLmxvYWRpbmcpIHtcbiAgICBzY2VuZXMubG9hZGluZy5pbml0KC4uLmluaXRpYWxBcmdzKTtcbiAgfVxuXG4gIGxvYWRTY2VuZShpbml0aWFsU2NlbmVOYW1lLCAuLi5pbml0aWFsQXJncyk7XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0gY2FudmFzIFxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlIChjYW52YXM6IENhbnZhcyk6IHZvaWQge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgZHJhd1N0YXRpY0l0ZW1zKHNjZW5lcy5sb2FkaW5nKTtcbiAgICBkcmF3RHluYW1pY0l0ZW1zKHNjZW5lcy5sb2FkaW5nLCBjYW52YXMpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgY3VycmVudFNjZW5lLnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY3VycmVudFNjZW5lLnVwZGF0ZShjYW52YXMpO1xuICAgIH1cblxuICAgIGN1cnJlbnRTY2VuZS5jb250cm9scy51cGRhdGUoKTtcbiAgICBkcmF3RHluYW1pY0l0ZW1zKGN1cnJlbnRTY2VuZSwgY2FudmFzKTtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBSZWN0YW5nbGUge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIGNlbnRlclg6IChyZWN0YW5nbGU6IFJlY3RhbmdsZSkgPT4gdm9pZDtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVjdGFuZ2xlIChwYXJhbXM6IFBhcnRpYWw8UmVjdGFuZ2xlPiA9IHt9KTogUmVjdGFuZ2xlIHtcbiAgcmV0dXJuIHtcbiAgICB4OiAwLFxuICAgIHk6IDAsXG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwLFxuICAgIGNlbnRlclg6IGZ1bmN0aW9uIChiYXNlOiBSZWN0YW5nbGUpOiB2b2lkIHtcbiAgICAgIGNvbnN0IHJlbGF0aXZlQ2VudGVyID0gYmFzZS54ICsgYmFzZS53aWR0aCAvIDI7XG4gICAgICB0aGlzLnggPSByZWxhdGl2ZUNlbnRlciAtIHRoaXMud2lkdGggLyAyO1xuICAgIH0sXG4gICAgLi4ucGFyYW1zXG4gIH07XG59XG4iLCJpbXBvcnQgeyBDYW52YXMsIENhbnZhc1R5cGUgfSBmcm9tICcuL2NhbnZhcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhcmFjdGVyIHtcbiAgb2Zmc2V0WDogbnVtYmVyO1xuICBvZmZzZXRZOiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICB0aWxlOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGb250IHtcbiAgWyBrZXk6c3RyaW5nIF06IENoYXJhY3RlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRPcHRpb25zIHtcbiAgZm9udDogRm9udDtcbiAgdHJhY2tpbmc6IG51bWJlcjtcbiAgbGluZUhlaWdodDogbnVtYmVyXG59O1xuXG4vKipcbiAqIFxuICogQHJldHVybnMge1RleHRPcHRpb25zfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGV4dE9wdGlvbnMgKCk6IFRleHRPcHRpb25zIHtcbiAgcmV0dXJuIHtcbiAgICBmb250OiBudWxsLFxuICAgIHRyYWNraW5nOiAwLFxuICAgIGxpbmVIZWlnaHQ6IDBcbiAgfTtcbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBmb250IFxuICogQHBhcmFtIGNoYXIgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoYXJhY3RlckRvZXNFeGlzdCAoZm9udDogRm9udCwgY2hhcjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmIChmb250W2NoYXJdKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZvbnQgZG9lcyBub3QgY29udGFpbiB0aGUgY2hhcmFjdGVyIFwiJHtjaGFyfVwiYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBjYW52YXMgXG4gKiBAcGFyYW0gY2hhclggXG4gKiBAcGFyYW0gY2hhclkgXG4gKiBAcGFyYW0gY2hhciBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdDaGFyYWN0ZXIgKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzLCBjaGFyWDogbnVtYmVyLCBjaGFyWTogbnVtYmVyLCBjaGFyOiBDaGFyYWN0ZXIpOiB2b2lkIHtcbiAgbGV0IHggPSAwO1xuICBsZXQgeSA9IDA7XG4gIGNvbnN0IHBwcCA9IGNhbnZhcy5jb25maWcucHBwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhci50aWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGNoYXIudGlsZVtpXSA9PT0gMSkge1xuICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZmlsbFJlY3QoXG4gICAgICAgIChjaGFyWCArIHggKyBjaGFyLm9mZnNldFgpICogcHBwLFxuICAgICAgICAoY2hhclkgKyB5ICsgY2hhci5vZmZzZXRZKSAqIHBwcCxcbiAgICAgICAgcHBwLFxuICAgICAgICBwcHBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHggPT09IGNoYXIud2lkdGggLSAxKSB7XG4gICAgICB4ID0gMDtcbiAgICAgIHkrKztcbiAgICB9IGVsc2Uge1xuICAgICAgeCsrO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFxuICogQHBhcmFtIGNhbnZhcyBcbiAqIEBwYXJhbSB0ZXh0IFxuICogQHBhcmFtIG9wdGlvbnMgXG4gKiBAcGFyYW0gY29sb3IgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3VGV4dExpbmUgKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzLCBsaW5lWDogbnVtYmVyLCBsaW5lWTogbnVtYmVyLCB0ZXh0OiBzdHJpbmcsIG9wdGlvbnM6IFRleHRPcHRpb25zKTogdm9pZCB7XG4gIGNvbnN0IGNoYXJhY3RlcnM6IHN0cmluZ1tdID0gdGV4dC5zcGxpdCgnJyk7XG4gIGxldCB4ID0gbGluZVg7XG4gIGxldCB5ID0gbGluZVk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYWN0ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhciA9IGNoYXJhY3RlcnNbaV07XG5cbiAgICBpZiAoY2hhcmFjdGVyRG9lc0V4aXN0KG9wdGlvbnMuZm9udCwgY2hhcikpIHtcbiAgICAgIGRyYXdDaGFyYWN0ZXIodHlwZSwgY2FudmFzLCB4LCB5LCBvcHRpb25zLmZvbnRbY2hhcl0pO1xuICAgICAgeCArPSBvcHRpb25zLmZvbnRbY2hhcl0ud2lkdGg7XG4gICAgfVxuXG4gICAgeCArPSBvcHRpb25zLnRyYWNraW5nO1xuICB9XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIGdldCBhcnJheSBvZiBsaW5lcyBjb25maW5lZCB0byBhIG1heCB3aWR0aFxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4V2lkdGggXG4gKiBAcmV0dXJucyB7c3RyaW5nW119XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lcyAodGV4dDogc3RyaW5nLCBvcHRpb25zOiBUZXh0T3B0aW9ucywgbWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHdvcmRzOiBzdHJpbmdbXSA9IHRleHQuc3BsaXQoJyAnKTtcbiAgbGV0IGxpbmUgPSAnJztcbiAgbGV0IGxpbmVXaWR0aCA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHdvcmQgPSB3b3Jkc1tpXTtcbiAgICBjb25zdCB3b3JkQ2hhcnMgPSB3b3JkLnNwbGl0KCcnKTtcblxuICAgIGxldCB3b3JkV2lkdGggPSAwO1xuXG4gICAgZm9yIChjb25zdCB3b3JkQ2hhciBvZiB3b3JkQ2hhcnMpIHtcbiAgICAgIGlmIChjaGFyYWN0ZXJEb2VzRXhpc3Qob3B0aW9ucy5mb250LCB3b3JkQ2hhcikpIHtcbiAgICAgICAgY29uc3QgY2hhciA9IG9wdGlvbnMuZm9udFt3b3JkQ2hhcl07XG4gICAgICAgIHdvcmRXaWR0aCArPSAoY2hhci53aWR0aCArIGNoYXIub2Zmc2V0WCArIG9wdGlvbnMudHJhY2tpbmcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxpbmVXaWR0aCArPSB3b3JkV2lkdGg7XG5cbiAgICBpZiAobGluZVdpZHRoIDw9IG1heFdpZHRoKSB7XG4gICAgICBsaW5lICs9IHdvcmQgKyAnICc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICBsaW5lID0gd29yZCArICcgJztcbiAgICAgIGxpbmVXaWR0aCA9IHdvcmRXaWR0aDtcbiAgICB9XG4gIH1cblxuICBsaW5lcy5wdXNoKGxpbmUpO1xuXG4gIHJldHVybiBsaW5lcztcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gZm9yIGNhbGN1bGF0aW5nIHBpeGVsIGxlbmd0aCBvZiB0ZXh0IHdpdGggbm8gbWF4V2lkdGhcbiAqIEBwYXJhbSB7c3RyaW5nfSBsaW5lIFxuICogQHBhcmFtIHt0ZXh0T3B0aW9uc30gb3B0aW9ucyBcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaW5lTGVuZ3RoIChsaW5lOiBzdHJpbmcsIG9wdGlvbnM6IFRleHRPcHRpb25zKTogbnVtYmVyIHtcbiAgY29uc3Qgd29yZENoYXJzID0gbGluZS5zcGxpdCgnJyk7XG4gIGxldCB3aWR0aCA9IDA7XG4gIFxuICBmb3IgKGNvbnN0IHdvcmRDaGFyIG9mIHdvcmRDaGFycykge1xuICAgIGlmIChjaGFyYWN0ZXJEb2VzRXhpc3Qob3B0aW9ucy5mb250LCB3b3JkQ2hhcikpIHtcbiAgICAgIGNvbnN0IGNoYXIgPSBvcHRpb25zLmZvbnRbd29yZENoYXJdO1xuICAgICAgd2lkdGggKz0gKGNoYXIud2lkdGggKyBjaGFyLm9mZnNldFggKyBvcHRpb25zLnRyYWNraW5nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd2lkdGg7XG59XG4iLCJpbXBvcnQgeyBBbmltYXRpb24sIE9uQ29tcGxldGUgfSBmcm9tIFwiLi9hbmltYXRpb25cIjtcbmltcG9ydCB7IENhbnZhcywgQ2FudmFzVHlwZSB9IGZyb20gXCIuL2NhbnZhc1wiO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBjcmVhdGVIaXRCb3gsIEhpdEJveCB9IGZyb20gXCIuL2hpdEJveFwiO1xuaW1wb3J0IHsgZHJhd1RpbGUsIE1ldGFUaWxlIH0gZnJvbSBcIi4vbWV0YVRpbGVcIjtcbmltcG9ydCB7IGNyZWF0ZVJlY3RhbmdsZSwgUmVjdGFuZ2xlIH0gZnJvbSBcIi4vcmVjdGFuZ2xlXCI7XG5pbXBvcnQgeyBjcmVhdGVUZXh0T3B0aW9ucywgZHJhd1RleHRMaW5lLCBnZXRMaW5lTGVuZ3RoLCBnZXRMaW5lcywgVGV4dE9wdGlvbnMgfSBmcm9tIFwiLi90ZXh0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dFNwcml0ZSB7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHZpc2libGU6IGJvb2xlYW47XG4gIG9wdGlvbnM6IFRleHRPcHRpb25zO1xuICByZWN0YW5nbGU6IFJlY3RhbmdsZTtcbiAgbWF4V2lkdGg6IG51bWJlcjtcbiAgZHJhdzogKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzKSA9PiB2b2lkO1xuICBjcmVhdGVBbmltYXRpb246IChzdGFydENoYXI6IG51bWJlciwgZW5kQ2hhcjogbnVtYmVyLCBpbnRlcnZhbDogbnVtYmVyLCBvbkNvbXBsZXRlPzogT25Db21wbGV0ZSkgPT4gQW5pbWF0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFUaWxlU3ByaXRlIHtcbiAgdmlzaWJsZTogYm9vbGVhbjtcbiAgbWV0YVRpbGU6IE1ldGFUaWxlO1xuICByZWN0YW5nbGU6IFJlY3RhbmdsZTtcbiAgaGl0Qm94OiBIaXRCb3g7XG4gIGRyYXc6ICh0eXBlOiBDYW52YXNUeXBlLCBjYW52YXM6IENhbnZhcykgPT4gdm9pZDtcbiAgY3JlYXRlQW5pbWF0aW9uOiAoc3RhcnRDaGFyOiBudW1iZXIsIGVuZENoYXI6IG51bWJlciwgaW50ZXJ2YWw6IG51bWJlciwgb25Db21wbGV0ZT86IE9uQ29tcGxldGUpID0+IEFuaW1hdGlvbjtcbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSBwYXJhbXMgXG4gKiBAcmV0dXJucyBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1ldGFUaWxlU3ByaXRlIChcbiAgcGFyYW1zOiBQYXJ0aWFsPFBpY2s8TWV0YVRpbGVTcHJpdGUsICdtZXRhVGlsZScgfCAndmlzaWJsZSc+PiA9IHt9XG4pOiBNZXRhVGlsZVNwcml0ZSB7XG4gIGNvbnN0IHJlY3RhbmdsZSA9IGNyZWF0ZVJlY3RhbmdsZSh7XG4gICAgd2lkdGg6IHBhcmFtcy5tZXRhVGlsZS53aWR0aCxcbiAgICBoZWlnaHQ6IHBhcmFtcy5tZXRhVGlsZS5oZWlnaHRcbiAgfSk7XG4gIGNvbnN0IGhpdEJveCA9IGNyZWF0ZUhpdEJveCh7XG4gICAgcmVjdGFuZ2xlXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZUhpdEJveCAodHlwZTogQ2FudmFzVHlwZSwgY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcbiAgICBoaXRCb3gucmVjdGFuZ2xlLnggPSByZWN0YW5nbGUueDtcbiAgICBoaXRCb3gucmVjdGFuZ2xlLnggPSByZWN0YW5nbGUueDtcblxuICAgIGhpdEJveC5kcmF3KHR5cGUsIGNhbnZhcyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZpc2libGU6IHRydWUsXG4gICAgbWV0YVRpbGU6IG51bGwsXG4gICAgcmVjdGFuZ2xlLFxuICAgIGhpdEJveCxcblxuICAgIGRyYXc6IGZ1bmN0aW9uICh0eXBlOiBDYW52YXNUeXBlLCBjYW52YXM6IENhbnZhcyk6IHZvaWQge1xuICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZmlnLmRlYnVnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBtZXRhVGlsZVNwcml0ZS5kcmF3KClgKTtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlSGl0Qm94KHR5cGUsIGNhbnZhcyk7XG4gICAgICBkcmF3VGlsZSh0eXBlLCBjYW52YXMsIHRoaXMucmVjdGFuZ2xlLngsIHRoaXMucmVjdGFuZ2xlLnksIHRoaXMubWV0YVRpbGUpO1xuICAgIH0sXG5cbiAgICBjcmVhdGVBbmltYXRpb246IGZ1bmN0aW9uIChzdGFydEZyYW1lOiBudW1iZXIsIGVuZEZyYW1lOiBudW1iZXIsIHRpY2tJbnRlcnZhbDogbnVtYmVyLCBvbkNvbXBsZXRlPzogT25Db21wbGV0ZSk6IEFuaW1hdGlvbiB7XG4gICAgICBjb25zdCBzcHJpdGUgPSB0aGlzO1xuXG4gICAgICBsZXQgY2FuQWR2YW5jZSA9IHRydWU7XG4gICAgICBsZXQgd2lsbEhhbmRsZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICBsZXQgY3VycmVudEZyYW1lID0gc3RhcnRGcmFtZTtcbiAgICAgIGxldCB0aWNrQ291bnQgPSAwO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgICAgICAgIGNhbkFkdmFuY2UgPSB0cnVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIChnb3RvRnJhbWU/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgICBpZiAoZ290b0ZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoZ290b0ZyYW1lID4gMCkge1xuICAgICAgICAgICAgICBjdXJyZW50RnJhbWUgPSBnb3RvRnJhbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjdXJyZW50RnJhbWUgPSBlbmRGcmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYW5BZHZhbmNlID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodHlwZTogQ2FudmFzVHlwZSwgY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcbiAgICAgICAgICBpZiAodGlja0NvdW50IDwgdGlja0ludGVydmFsKSB7XG4gICAgICAgICAgICB0aWNrQ291bnQrKztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhbkFkdmFuY2UpIHtcbiAgICAgICAgICAgICAgY3VycmVudEZyYW1lID0gTWF0aC5taW4oZW5kRnJhbWUsICsrY3VycmVudEZyYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdpbGxIYW5kbGVDb21wbGV0ZSkge1xuICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSA9PT0gJ2xvb3AnKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudEZyYW1lID0gc3RhcnRGcmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3aWxsSGFuZGxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGlja0NvdW50ID0gMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY2FuQWR2YW5jZSAmJiBjdXJyZW50RnJhbWUgPT09IGVuZEZyYW1lKSB7XG4gICAgICAgICAgICAvLyBhbGxvdyB0aGUgZmluYWwgaW50ZXJ2YWwgdG8gcnVuIGJlZm9yZSBoYW5kbGluZyBjb21wbGV0ZVxuICAgICAgICAgICAgd2lsbEhhbmRsZUNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzcHJpdGUubWV0YVRpbGUuZnJhbWUgPSBjdXJyZW50RnJhbWU7XG4gICAgICAgICAgc3ByaXRlLmRyYXcodHlwZSwgY2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgLi4ucGFyYW1zXG4gIH07XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0gcGFyYW1zIFxuICogQHJldHVybnMgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0U3ByaXRlIChcbiAgLy8gdmFsdWUgbXVzdCBiZSBwYXNzZWQgaW4gZm9yIGluaXRpYWwsIGF1dG9tYXRpYyByZWN0YW5nbGUgY2FsY3VsYXRpb25cbiAgcGFyYW1zOiBQYXJ0aWFsPFBpY2s8VGV4dFNwcml0ZSwgJ2NvbG9yJyB8ICd2YWx1ZScgfCAnbWF4V2lkdGgnIHwgJ29wdGlvbnMnIHwgJ3Zpc2libGUnPj4gPSB7fVxuKTogVGV4dFNwcml0ZSB7XG4gIGNvbnN0IHdpZHRoID0gcGFyYW1zLm1heFdpZHRoIHx8IGdldExpbmVMZW5ndGgocGFyYW1zLnZhbHVlLCBwYXJhbXMub3B0aW9ucyk7XG4gIGNvbnN0IHJlY3RhbmdsZSA9IGNyZWF0ZVJlY3RhbmdsZSh7IHdpZHRoIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBjb2xvcjogJyMwMDAnLFxuICAgIHZhbHVlOiAnJyxcbiAgICBtYXhXaWR0aDogbnVsbCxcbiAgICB2aXNpYmxlOiB0cnVlLFxuICAgIG9wdGlvbnM6IGNyZWF0ZVRleHRPcHRpb25zKCksXG4gICAgcmVjdGFuZ2xlLFxuXG4gICAgZHJhdzogZnVuY3Rpb24gKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzKTogdm9pZCB7XG4gICAgICBpZiAoIXRoaXMudmlzaWJsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25maWcuZGVidWcpIHtcbiAgICAgICAgY29uc29sZS5sb2coYHRleHRTcHJpdGUuZHJhdygpYCk7XG4gICAgICB9XG5cbiAgICAgIGNhbnZhcy5jb250ZXh0W3R5cGVdLmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XG5cbiAgICAgIGlmICh0aGlzLm1heFdpZHRoKSB7XG4gICAgICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IGdldExpbmVzKHRoaXMudmFsdWUsIHRoaXMub3B0aW9ucywgdGhpcy5tYXhXaWR0aCk7XG4gICAgICAgIGxldCB5ID0gdGhpcy5yZWN0YW5nbGUueTtcblxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICBkcmF3VGV4dExpbmUodHlwZSwgY2FudmFzLCB0aGlzLnJlY3RhbmdsZS54LCB5LCBsaW5lLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICAgIHkgKz0gdGhpcy5vcHRpb25zLmxpbmVIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYXdUZXh0TGluZSh0eXBlLCBjYW52YXMsIHRoaXMucmVjdGFuZ2xlLngsIHRoaXMucmVjdGFuZ2xlLnksIHRoaXMudmFsdWUsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydENoYXIgXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVuZENoYXIgdXNlIDEtbiBmb3IgYSBzcGVjaWZpYyBlbmQgY2hhcmFjdGVyOyBvciAtMSBmb3IgdGhlIGNoYXJhY3RlciBsZW5ndGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW50ZXJ2YWwgaG93IG1hbnkgdGlja3MgcGVyIGZyYW1lXG4gICAgICogQHBhcmFtIHtPbkNvbXBsZXRlfSBvbkNvbXBsZXRlIFxuICAgICAqIEByZXR1cm5zIHtBbmltYXRpb259XG4gICAgICovXG4gICAgY3JlYXRlQW5pbWF0aW9uOiBmdW5jdGlvbiAoc3RhcnRDaGFyOiBudW1iZXIsIGVuZENoYXI6IG51bWJlciwgdGlja0ludGVydmFsOiBudW1iZXIsIG9uQ29tcGxldGU/OiBPbkNvbXBsZXRlKTogQW5pbWF0aW9uIHtcbiAgICAgIGNvbnN0IHNwcml0ZSA9IHRoaXM7XG4gICAgICBjb25zdCBjaGFyTGVuID0gc3ByaXRlLnZhbHVlLnNwbGl0KCcnKS5sZW5ndGg7XG5cbiAgICAgIGxldCB0aWNrQ291bnQgPSAwO1xuICAgICAgbGV0IGRyYXdhYmxlQ2hhckxlbiA9IHN0YXJ0Q2hhcjtcbiAgICAgIGxldCB3aWxsSGFuZGxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgIGxldCBjYW5BZHZhbmNlID0gdHJ1ZTtcblxuICAgICAgZW5kQ2hhciA9IGVuZENoYXIgPiAwID8gZW5kQ2hhciA6IGNoYXJMZW47XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICAgICAgY2FuQWR2YW5jZSA9IHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RvcDogZnVuY3Rpb24gKGdvdG9DaGFyPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgICAgaWYgKGdvdG9DaGFyKSB7XG4gICAgICAgICAgICBpZiAoZ290b0NoYXIgPiAwKSB7XG4gICAgICAgICAgICAgIGRyYXdhYmxlQ2hhckxlbiA9IGdvdG9DaGFyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZHJhd2FibGVDaGFyTGVuID0gY2hhckxlbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYW5BZHZhbmNlID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAodHlwZTogQ2FudmFzVHlwZSwgY2FudmFzOiBDYW52YXMpOiB2b2lkIHtcbiAgICAgICAgICBpZiAoIXNwcml0ZS52aXNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZmlsbFN0eWxlID0gc3ByaXRlLmNvbG9yO1xuICAgICAgXG4gICAgICAgICAgaWYgKHRpY2tDb3VudCA8IHRpY2tJbnRlcnZhbCkge1xuICAgICAgICAgICAgdGlja0NvdW50Kys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYW5BZHZhbmNlKSB7XG4gICAgICAgICAgICAgIGRyYXdhYmxlQ2hhckxlbiA9IE1hdGgubWluKGVuZENoYXIsICsrZHJhd2FibGVDaGFyTGVuKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdpbGxIYW5kbGVDb21wbGV0ZSkge1xuICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSA9PT0gJ2xvb3AnKSB7XG4gICAgICAgICAgICAgICAgZHJhd2FibGVDaGFyTGVuID0gc3RhcnRDaGFyO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHdpbGxIYW5kbGVDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aWNrQ291bnQgPSAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjYW5BZHZhbmNlICYmIGRyYXdhYmxlQ2hhckxlbiA9PT0gZW5kQ2hhcikge1xuICAgICAgICAgICAgLy8gYWxsb3cgdGhlIGZpbmFsIGludGVydmFsIHRvIHJ1biBiZWZvcmUgaGFuZGxpbmcgY29tcGxldGVcbiAgICAgICAgICAgIHdpbGxIYW5kbGVDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYG1ldGFUaWxlU3ByaXRlLmRyYXcoKWApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzcHJpdGUubWF4V2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IGdldExpbmVzKHNwcml0ZS52YWx1ZSwgc3ByaXRlLm9wdGlvbnMsIHNwcml0ZS5tYXhXaWR0aCk7XG4gICAgICAgICAgICBsZXQgeSA9IHNwcml0ZS5yZWN0YW5nbGUueTtcbiAgICAgICAgICAgIGxldCBkcmF3bkNoYXJMZW4gPSAwO1xuICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgICAgICAgICAgaWYgKGRyYXduQ2hhckxlbiArIGxpbmUubGVuZ3RoIDwgZHJhd2FibGVDaGFyTGVuKSB7XG4gICAgICAgICAgICAgICAgZHJhd1RleHRMaW5lKHR5cGUsIGNhbnZhcywgc3ByaXRlLnJlY3RhbmdsZS54LCB5LCBsaW5lLCBzcHJpdGUub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgZHJhd25DaGFyTGVuICs9IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYXdUZXh0TGluZSh0eXBlLCBjYW52YXMsIHNwcml0ZS5yZWN0YW5nbGUueCwgeSwgbGluZS5zbGljZSgwLCBkcmF3YWJsZUNoYXJMZW4gLSBkcmF3bkNoYXJMZW4pLCBzcHJpdGUub3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgZHJhd25DaGFyTGVuICs9IGRyYXdhYmxlQ2hhckxlbiAtIGRyYXduQ2hhckxlbjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHkgKz0gc3ByaXRlLm9wdGlvbnMubGluZUhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHJhd1RleHRMaW5lKHR5cGUsIGNhbnZhcywgc3ByaXRlLnJlY3RhbmdsZS54LCBzcHJpdGUucmVjdGFuZ2xlLnksIHNwcml0ZS52YWx1ZS5zbGljZSgwLCBkcmF3YWJsZUNoYXJMZW4pLCBzcHJpdGUub3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC4uLnBhcmFtc1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNUeXBlIH0gZnJvbSBcIi4vY2FudmFzXCI7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB7IGNyZWF0ZVJlY3RhbmdsZSwgUmVjdGFuZ2xlIH0gZnJvbSBcIi4vcmVjdGFuZ2xlXCI7XG5cblxuZXhwb3J0IGludGVyZmFjZSBIaXRCb3gge1xuICBjb2xvcjogc3RyaW5nOyAvLyBtb3ZlIHRvIGRlYnVnIG9iamVjdFxuICByZWN0YW5nbGU6IFJlY3RhbmdsZTtcbiAgZHJhdzogKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzKSA9PiB2b2lkO1xuICBoaXQ6IChoaXRCb3g6IEhpdEJveCkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhpdEJveCAoXG4gIHBhcmFtczogUGFydGlhbDxQaWNrPEhpdEJveCwgJ2NvbG9yJyB8ICdyZWN0YW5nbGUnPj4gPSB7fVxuKTogSGl0Qm94IHtcbiAgcmV0dXJuIHtcbiAgICBjb2xvcjogJyMwNmYnLFxuICAgIHJlY3RhbmdsZTogY3JlYXRlUmVjdGFuZ2xlKHBhcmFtcy5yZWN0YW5nbGUpLFxuXG4gICAgZHJhdzogZnVuY3Rpb24gKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzKTogdm9pZCB7XG4gICAgICBpZiAoY29uZmlnLmRlYnVnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBoaXRCb3guZHJhdygpYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBwcCA9IGNhbnZhcy5jb25maWcucHBwO1xuICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZ2xvYmFsQWxwaGEgPSAwLjQ7XG4gICAgICBjYW52YXMuY29udGV4dFt0eXBlXS5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xuICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZmlsbFJlY3QoXG4gICAgICAgICh0aGlzLnJlY3RhbmdsZS54KSAqIHBwcCxcbiAgICAgICAgKHRoaXMucmVjdGFuZ2xlLnkpICogcHBwLCBcbiAgICAgICAgKHRoaXMucmVjdGFuZ2xlLndpZHRoKSAqIHBwcCxcbiAgICAgICAgKHRoaXMucmVjdGFuZ2xlLmhlaWdodCkgKiBwcHBcbiAgICAgICk7XG4gICAgfSxcblxuICAgIGhpdDogZnVuY3Rpb24gKGhpdEJveDogSGl0Qm94KTogYm9vbGVhbiB7XG4gICAgICAvLyBUT0RPXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICAuLi5wYXJhbXNcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FudmFzLCBDYW52YXNUeXBlIH0gZnJvbSBcIi4vY2FudmFzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWV0YVRpbGUge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgZnJhbWU6IG51bWJlcjtcbiAgdGlsZXM6IHN0cmluZ1tdW107XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0gY2FudmFzIFxuICogQHBhcmFtIHRpbGVYIFxuICogQHBhcmFtIHRpbGVZIFxuICogQHBhcmFtIG1ldGFUaWxlIFxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd1RpbGUgKHR5cGU6IENhbnZhc1R5cGUsIGNhbnZhczogQ2FudmFzLCB0aWxlWDogbnVtYmVyLCB0aWxlWTogbnVtYmVyLCBtZXRhVGlsZTogTWV0YVRpbGUpOiB2b2lkIHtcbiAgbGV0IHggPSAwO1xuICBsZXQgeSA9IDA7XG4gIGNvbnN0IHBwcCA9IGNhbnZhcy5jb25maWcucHBwO1xuICBjb25zdCB0aWxlID0gbWV0YVRpbGUudGlsZXNbbWV0YVRpbGUuZnJhbWVdO1xuXG4gIGNhbnZhcy5jb250ZXh0W3R5cGVdLmdsb2JhbEFscGhhID0gMTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBoZXggPSB0aWxlW2ldO1xuXG4gICAgaWYgKGhleCkge1xuICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZmlsbFN0eWxlID0gaGV4O1xuICAgICAgY2FudmFzLmNvbnRleHRbdHlwZV0uZmlsbFJlY3QoXG4gICAgICAgICh0aWxlWCArIHgpICogcHBwLFxuICAgICAgICAodGlsZVkgKyB5KSAqIHBwcCxcbiAgICAgICAgcHBwLCBwcHBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHggPT09IG1ldGFUaWxlLndpZHRoIC0gMSkge1xuICAgICAgeCA9IDA7XG4gICAgICB5Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHgrKztcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEZvbnQsIFRleHRPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29tbW9uL3RleHQnO1xuXG5pbXBvcnQgZm9udERhdGEgZnJvbSAnLi9kYXRhL25lcy1mb250Lmpzb24nO1xuXG5jb25zdCBmb250ID0gZm9udERhdGEgYXMgRm9udDtcblxuZXhwb3J0IGNvbnN0IHRleHRPcHRpb25zOiBUZXh0T3B0aW9ucyA9IHtcbiAgZm9udCxcbiAgdHJhY2tpbmc6IDEsXG4gIGxpbmVIZWlnaHQ6IDEwXG59O1xuIiwiaW1wb3J0IHsgY3JlYXRlUmVjdGFuZ2xlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9yZWN0YW5nbGVcIjtcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zY2VuZVwiO1xuaW1wb3J0IHsgY3JlYXRlTWV0YVRpbGVTcHJpdGUsIGNyZWF0ZVRleHRTcHJpdGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3Nwcml0ZVwiO1xuXG5pbXBvcnQgeyB0ZXh0T3B0aW9ucyB9IGZyb20gXCIuLi9jb21tb24vdGV4dE9wdGlvbnNcIjtcblxuZnVuY3Rpb24gcGxhY2VJdGVtcyAoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gIGNvbnN0IGNhbnZhc1JlY3RhbmdsZSA9IGNyZWF0ZVJlY3RhbmdsZSh7IHdpZHRoOiBzY2VuZS5jYW52YXMuY29uZmlnLndpZHRoIH0pO1xuXG4gIHNjZW5lLnN0YXRpY1Nwcml0ZXMuY29udHJvbHMucmVjdGFuZ2xlLmNlbnRlclgoY2FudmFzUmVjdGFuZ2xlKTtcbiAgc2NlbmUuc3RhdGljU3ByaXRlcy5jb250cm9scy5yZWN0YW5nbGUueSA9IDE4O1xuXG4gIHNjZW5lLnNwcml0ZXMuYW55S2V5LnJlY3RhbmdsZS5jZW50ZXJYKGNhbnZhc1JlY3RhbmdsZSk7XG4gIHNjZW5lLnNwcml0ZXMuYW55S2V5LnJlY3RhbmdsZS55ID0gMjA2O1xufVxuXG5jb25zdCBhbnlLZXkgPSB7XG4gIHRpY2tzUGVyQmxpbms6IDE2LFxuICB0aWNrQ291bnQ6IDAsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoc2NlbmU6IFNjZW5lKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGlja0NvdW50IDwgdGhpcy50aWNrc1BlckJsaW5rKSB7XG4gICAgICB0aGlzLnRpY2tDb3VudCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICBzY2VuZS5zcHJpdGVzLmFueUtleS52aXNpYmxlID0gIXNjZW5lLnNwcml0ZXMuYW55S2V5LnZpc2libGU7XG4gICAgICB0aGlzLnRpY2tDb3VudCA9IDA7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBzcGxhc2g6IFNjZW5lID0ge1xuICBuYW1lOiAnc3BsYXNoJyxcbiAgYmdDb2xvcjogJyMwMDAnLFxuICBwcmVsb2FkOiB7XG4gICAgY29udHJvbHM6ICdzcmMvc2NlbmVzL2Fzc2V0cy9zcGxhc2gvY29udHJvbHMuanNvbidcbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgYW55S2V5LnRpY2tDb3VudCA9IDA7XG5cbiAgICB0aGlzLmNvbnRyb2xzLmtleURvd24gPSAoKSA9PiB7XG4gICAgICB0aGlzLmNoYW5nZVNjZW5lKCd0aXRsZScpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGljU3ByaXRlcy5jb250cm9scyA9IGNyZWF0ZU1ldGFUaWxlU3ByaXRlKHtcbiAgICAgIG1ldGFUaWxlOiB0aGlzLm1ldGFUaWxlcy5jb250cm9sc1xuICAgIH0pO1xuXG4gICAgdGhpcy5zcHJpdGVzLmFueUtleSA9IGNyZWF0ZVRleHRTcHJpdGUoe1xuICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgIG9wdGlvbnM6IHRleHRPcHRpb25zLFxuICAgICAgdmFsdWU6ICdQUkVTUyBBTlkgS0VZIFRPIENPTlRJTlVFJ1xuICAgIH0pO1xuXG4gICAgcGxhY2VJdGVtcyh0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICBhbnlLZXkudXBkYXRlKHRoaXMpO1xuICB9LFxuXG4gIG9uUmVzaXplOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgcGxhY2VJdGVtcyh0aGlzKTtcbiAgfVxufTtcbiIsImltcG9ydCB7IFNjZW5lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zY2VuZVwiO1xuaW1wb3J0IHsgY3JlYXRlVGV4dFNwcml0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vc3ByaXRlXCI7XG5cbmltcG9ydCB7IHRleHRPcHRpb25zIH0gZnJvbSBcIi4uL2NvbW1vbi90ZXh0T3B0aW9uc1wiO1xuXG5leHBvcnQgY29uc3QgbG9hZGluZzogU2NlbmUgPSB7XG4gIG5hbWU6ICdsb2FkaW5nJyxcbiAgYmdDb2xvcjogJyMwMDAnLFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpOiB2b2lkIHtcbiAgICB0aGlzLnNwcml0ZXMubG9hZGluZ1RleHQgPSBjcmVhdGVUZXh0U3ByaXRlKHtcbiAgICAgIGNvbG9yOiAnI2ZmZicsXG4gICAgICBvcHRpb25zOiB0ZXh0T3B0aW9ucyxcbiAgICAgIHZhbHVlOiAnTE9BRElORydcbiAgICB9KTtcblxuICAgIGNvbnN0IGVsbGlwc2lzID0gY3JlYXRlVGV4dFNwcml0ZSh7XG4gICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgb3B0aW9uczogdGV4dE9wdGlvbnMsXG4gICAgICB2YWx1ZTogJy4uLidcbiAgICB9KTtcbiAgICB0aGlzLmFuaW1hdGlvbnMuZWxsaXBzaXMgPSBlbGxpcHNpcy5jcmVhdGVBbmltYXRpb24oMCwgbnVsbCwgMTYsICdsb29wJyk7XG5cbiAgICBjb25zdCB0ZXh0WSA9IHRoaXMuY2FudmFzLmNvbmZpZy5oZWlnaHQgLSAodGhpcy5zcHJpdGVzLmxvYWRpbmdUZXh0LnJlY3RhbmdsZS5oZWlnaHQgKyAxNik7XG5cbiAgICB0aGlzLnNwcml0ZXMubG9hZGluZ1RleHQucmVjdGFuZ2xlLnggPSAoXG4gICAgICB0aGlzLmNhbnZhcy5jb25maWcud2lkdGggLSAodGhpcy5zcHJpdGVzLmxvYWRpbmdUZXh0LnJlY3RhbmdsZS53aWR0aCArIGVsbGlwc2lzLnJlY3RhbmdsZS53aWR0aCArIDgpXG4gICAgKTtcbiAgICB0aGlzLnNwcml0ZXMubG9hZGluZ1RleHQucmVjdGFuZ2xlLnkgPSB0ZXh0WTtcblxuICAgIGVsbGlwc2lzLnJlY3RhbmdsZS54ID0gKFxuICAgICAgdGhpcy5zcHJpdGVzLmxvYWRpbmdUZXh0LnJlY3RhbmdsZS54ICsgdGhpcy5zcHJpdGVzLmxvYWRpbmdUZXh0LnJlY3RhbmdsZS53aWR0aFxuICAgICk7XG4gICAgZWxsaXBzaXMucmVjdGFuZ2xlLnkgPSB0ZXh0WTtcbiAgfVxufTtcbiIsImltcG9ydCB7IG1lZGlhUGxheWVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9tZWRpYVBsYXllclwiO1xuaW1wb3J0IHsgY3JlYXRlUmVjdGFuZ2xlLCBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3JlY3RhbmdsZVwiO1xuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NjZW5lXCI7XG5pbXBvcnQgeyBjcmVhdGVNZXRhVGlsZVNwcml0ZSwgY3JlYXRlVGV4dFNwcml0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vc3ByaXRlXCI7XG5cbmltcG9ydCB7IHRleHRPcHRpb25zIH0gZnJvbSBcIi4uL2NvbW1vbi90ZXh0T3B0aW9uc1wiO1xuXG5mdW5jdGlvbiBwbGFjZVN0YXRpY0l0ZW1zIChzY2VuZTogU2NlbmUpOiB2b2lkIHtcbiAgY29uc3QgY2FudmFzUmVjdGFuZ2xlID0gY3JlYXRlUmVjdGFuZ2xlKHtcbiAgICB3aWR0aDogc2NlbmUuY2FudmFzLmNvbmZpZy53aWR0aCxcbiAgICBoZWlnaHQ6IHNjZW5lLmNhbnZhcy5jb25maWcuaGVpZ2h0XG4gIH0pO1xuXG4gIHNjZW5lLnN0YXRpY1Nwcml0ZXMudGl0bGVUZXh0LnJlY3RhbmdsZS5jZW50ZXJYKGNhbnZhc1JlY3RhbmdsZSk7XG4gIHNjZW5lLnN0YXRpY1Nwcml0ZXMuc3RhcnRHYW1lLnJlY3RhbmdsZS5jZW50ZXJYKGNhbnZhc1JlY3RhbmdsZSk7XG4gIHNjZW5lLnN0YXRpY1Nwcml0ZXMuYWJvdXQucmVjdGFuZ2xlLmNlbnRlclgoY2FudmFzUmVjdGFuZ2xlKTtcbiAgc2NlbmUuc3RhdGljU3ByaXRlcy5jb3B5cmlnaHQucmVjdGFuZ2xlLmNlbnRlclgoY2FudmFzUmVjdGFuZ2xlKTtcblxuICBzY2VuZS5zdGF0aWNTcHJpdGVzLnRpdGxlVGV4dC5yZWN0YW5nbGUueSA9IDE4O1xuICBzY2VuZS5zdGF0aWNTcHJpdGVzLnN0YXJ0R2FtZS5yZWN0YW5nbGUueSA9IDE1NDtcbiAgc2NlbmUuc3RhdGljU3ByaXRlcy5hYm91dC5yZWN0YW5nbGUueSA9IHNjZW5lLnN0YXRpY1Nwcml0ZXMuc3RhcnRHYW1lLnJlY3RhbmdsZS55ICsgMTk7XG4gIHNjZW5lLnN0YXRpY1Nwcml0ZXMuY29weXJpZ2h0LnJlY3RhbmdsZS55ID0gY2FudmFzUmVjdGFuZ2xlLmhlaWdodCAtIDE2O1xufVxuXG5jb25zdCBzZWxlY3Rpb24gPSB7XG4gIGluZGV4OiAwLFxuICBpdGVtczogW1xuICAgICdzdGFydEdhbWUnLFxuICAgICdhYm91dCdcbiAgXVxufTtcblxuY29uc3QgY3Vyc29yID0ge1xuICBvZmZzZXRYOiA3LFxuICBvZmZzZXRZOiAxLFxuICB0aWNrc1BlckJsaW5rOiAxNixcbiAgdGlja0NvdW50OiAwLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHNjZW5lOiBTY2VuZSwgc2VsZWN0ZWRSZWN0YW5nbGU6IFJlY3RhbmdsZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRpY2tDb3VudCA8IHRoaXMudGlja3NQZXJCbGluaykge1xuICAgICAgdGhpcy50aWNrQ291bnQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgc2NlbmUuc3ByaXRlcy5jdXJzb3IudmlzaWJsZSA9ICFzY2VuZS5zcHJpdGVzLmN1cnNvci52aXNpYmxlO1xuICAgICAgdGhpcy50aWNrQ291bnQgPSAwO1xuICAgIH1cblxuICAgIHNjZW5lLnNwcml0ZXMuY3Vyc29yLnJlY3RhbmdsZS54ID0gc2VsZWN0ZWRSZWN0YW5nbGUueCAtIHNjZW5lLnNwcml0ZXMuY3Vyc29yLnJlY3RhbmdsZS53aWR0aCAtIHRoaXMub2Zmc2V0WFxuICAgIHNjZW5lLnNwcml0ZXMuY3Vyc29yLnJlY3RhbmdsZS55ID0gc2VsZWN0ZWRSZWN0YW5nbGUueSAtIHRoaXMub2Zmc2V0WTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHRpdGxlOiBTY2VuZSA9IHtcbiAgbmFtZTogJ3RpdGxlJyxcbiAgYmdDb2xvcjogJyMwMDAnLFxuICBwcmVsb2FkOiB7XG4gICAgJ3RoZW1lJzogJ3NyYy9zY2VuZXMvYXNzZXRzL3RpdGxlL3RoZW1lLm1wMycsXG4gICAgJ3NlbGVjdCc6ICdzcmMvc2NlbmVzL2Fzc2V0cy90aXRsZS9zZWxlY3QubXAzJyxcbiAgICAndGl0bGVUZXh0JzogJ3NyYy9zY2VuZXMvYXNzZXRzL3RpdGxlL3RpdGxlLXRleHQuanNvbicsXG4gICAgJ2N1cnNvcic6ICdzcmMvc2NlbmVzL2Fzc2V0cy90aXRsZS9jdXJzb3IuanNvbidcbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgc2VsZWN0aW9uLmluZGV4ID0gMDtcbiAgICBjdXJzb3IudGlja0NvdW50ID0gMDtcblxuICAgIHRoaXMuc3RhdGljU3ByaXRlcy50aXRsZVRleHQgPSBjcmVhdGVNZXRhVGlsZVNwcml0ZSh7XG4gICAgICBtZXRhVGlsZTogdGhpcy5tZXRhVGlsZXMudGl0bGVUZXh0XG4gICAgfSk7XG4gICAgdGhpcy5zdGF0aWNTcHJpdGVzLnN0YXJ0R2FtZSA9IGNyZWF0ZVRleHRTcHJpdGUoe1xuICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgIG9wdGlvbnM6IHRleHRPcHRpb25zLFxuICAgICAgdmFsdWU6ICdTVEFSVCBHQU1FJ1xuICAgIH0pO1xuICAgIHRoaXMuc3RhdGljU3ByaXRlcy5hYm91dCA9IGNyZWF0ZVRleHRTcHJpdGUoe1xuICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgIG9wdGlvbnM6IHRleHRPcHRpb25zLFxuICAgICAgdmFsdWU6ICdBQk9VVCdcbiAgICB9KTtcbiAgICB0aGlzLnN0YXRpY1Nwcml0ZXMuY29weXJpZ2h0ID0gY3JlYXRlVGV4dFNwcml0ZSh7XG4gICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgb3B0aW9uczogdGV4dE9wdGlvbnMsXG4gICAgICB2YWx1ZTogJzIwMjEgQ09TTUlDIFBPTFlHT04nXG4gICAgfSk7XG5cbiAgICBwbGFjZVN0YXRpY0l0ZW1zKHRoaXMpO1xuXG4gICAgdGhpcy5zcHJpdGVzLmN1cnNvciA9IGNyZWF0ZU1ldGFUaWxlU3ByaXRlKHtcbiAgICAgIG1ldGFUaWxlOiB0aGlzLm1ldGFUaWxlcy5jdXJzb3JcbiAgICB9KTtcblxuICAgIGNvbnN0IGhhbmRsZVNlbGVjdGlvbiA9ICgpOiB2b2lkID0+IHtcbiAgICAgIG1lZGlhUGxheWVyLnBhdXNlQWxsKCk7XG4gICAgICBtZWRpYVBsYXllci5wbGF5KCdzZWxlY3QnLCBmYWxzZSwgKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKHNlbGVjdGlvbi5pbmRleCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hhbmdlU2NlbmUoJ2ludHJvJykpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jaGFuZ2VTY2VuZSgnYWJvdXQnKSk7XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRyb2xzLnVwUHJlc3MgPSAoKSA9PiB7XG4gICAgICBpZiAoc2VsZWN0aW9uLmluZGV4ID4gMCkge1xuICAgICAgICBzZWxlY3Rpb24uaW5kZXgtLTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuY29udHJvbHMuZG93blByZXNzID0gKCkgPT4ge1xuICAgICAgaWYgKHNlbGVjdGlvbi5pbmRleCA8IHNlbGVjdGlvbi5pdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHNlbGVjdGlvbi5pbmRleCsrO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5jb250cm9scy5hUHJlc3MgPSAoKSA9PiB7XG4gICAgICBoYW5kbGVTZWxlY3Rpb24oKTtcbiAgICB9O1xuICAgIHRoaXMuY29udHJvbHMuc3RhcnRQcmVzcyA9ICgpID0+IHtcbiAgICAgIGhhbmRsZVNlbGVjdGlvbigpO1xuICAgIH07XG5cbiAgICBtZWRpYVBsYXllci5wbGF5KCd0aGVtZScsIHRydWUpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCk6IHZvaWQge1xuICAgIGN1cnNvci51cGRhdGUodGhpcywgdGhpcy5zdGF0aWNTcHJpdGVzW3NlbGVjdGlvbi5pdGVtc1tzZWxlY3Rpb24uaW5kZXhdXS5yZWN0YW5nbGUpO1xuICB9LFxuXG4gIG9uUmVzaXplOiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgcGxhY2VTdGF0aWNJdGVtcyh0aGlzKTtcbiAgfVxufTtcbiIsImltcG9ydCB7IGNyZWF0ZUNhbnZhcyB9IGZyb20gJy4vY29tbW9uL2NhbnZhcyc7XG5pbXBvcnQgKiBhcyBsb29wIGZyb20gJy4vY29tbW9uL2xvb3AnO1xuaW1wb3J0ICogYXMgc2NlbmUgZnJvbSAnLi9jb21tb24vc2NlbmUnO1xuXG4vLyBpbXBvcnQgeyBpbnRybyB9IGZyb20gJy4vc2NlbmVzL2ludHJvL2luZGV4JztcbmltcG9ydCB7IHNwbGFzaCB9IGZyb20gJy4vc2NlbmVzL3NwbGFzaC9pbmRleCc7XG5pbXBvcnQgeyBsb2FkaW5nIH0gZnJvbSAnLi9zY2VuZXMvbG9hZGluZy9pbmRleCc7XG4vLyBpbXBvcnQgeyBwcm9sb2d1ZSB9IGZyb20gJy4vc2NlbmVzL3BsYXkvcHJvbG9ndWUvaW5kZXgnO1xuLy8gaW1wb3J0IHsgdGVzdCB9IGZyb20gJy4vc2NlbmVzL3Rlc3QvaW5kZXgnO1xuaW1wb3J0IHsgdGl0bGUgfSBmcm9tICcuL3NjZW5lcy90aXRsZS9pbmRleCc7XG5cbmNvbnN0IGNhbnZhcyA9IGNyZWF0ZUNhbnZhcygpO1xuY2FudmFzLmZpdFRvVmlld3BvcnQoKTtcbndpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IGNhbnZhcy5maXRUb1ZpZXdwb3J0KCk7XG5cbnNjZW5lLmluaXQoe1xuICBsb2FkaW5nLFxuICBzcGxhc2gsXG4gIHRpdGxlXG59LCAnc3BsYXNoJywgY2FudmFzKTtcblxubG9vcC5pbml0KCgpID0+IHtcbiAgc2NlbmUudXBkYXRlKGNhbnZhcyk7XG59KTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ2FudmFzQ29uZmlnIHtcbiAgcHBwOiBudW1iZXI7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBDYW52YXNUeXBlID0gJ3N0YXRpYycgfCAnZHluYW1pYyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FudmFzIHtcbiAgZWxlbWVudDogUmVjb3JkPENhbnZhc1R5cGUsIEhUTUxDYW52YXNFbGVtZW50PjtcbiAgY29udGV4dDogUmVjb3JkPENhbnZhc1R5cGUsIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD47XG4gIGNvbmZpZzogQ2FudmFzQ29uZmlnO1xuXG4gIGNsZWFyOiAoY2FudmFzVHlwZTogQ2FudmFzVHlwZSwgY29sb3VyPzogc3RyaW5nKSA9PiB2b2lkO1xuICBnZXRTY2FsZUZhY3RvcjogKHZpZXdwb3J0V2lkdGg6IG51bWJlciwgdmlld3BvcnRIZWlnaHQ6IG51bWJlcikgPT4gbnVtYmVyO1xuICBmaXRUb1ZpZXdwb3J0OiAoKSA9PiB2b2lkO1xuICBvblJlc2l6ZTogKCkgPT4gYW55O1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogQHBhcmFtIHtQYXJ0aWFsPENhbnZhc0NvbmZpZz59IFtjb25maWc9e31dXG4gKiBAcmV0dXJucyB7Q2FudmFzfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FudmFzICh1c2VyQ29uZmlnOiBQYXJ0aWFsPENhbnZhc0NvbmZpZz4gPSB7fSk6IENhbnZhcyB7XG4gIGNvbnN0IGNvbmZpZzogQ2FudmFzQ29uZmlnID0ge1xuICAgIHBwcDogMSxcbiAgICAvLyBuZXM6IDI1NngyNDBcbiAgICB3aWR0aDogMzIwLFxuICAgIGhlaWdodDogMjQwLFxuICAgIC4uLnVzZXJDb25maWdcbiAgfTtcblxuICBmdW5jdGlvbiBjYW52YXNGYWN0b3J5IChpZDogc3RyaW5nKTogeyBlbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudCwgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIH0ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblxuICAgIGVsZW1lbnQuaWQgPSBpZDtcbiAgICBlbGVtZW50LndpZHRoID0gY29uZmlnLndpZHRoO1xuICAgIGVsZW1lbnQuaGVpZ2h0ID0gY29uZmlnLmhlaWdodDtcbiAgICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblxuICAgIGNvbnN0IGNvbnRleHQgPSBlbGVtZW50LmdldENvbnRleHQoJzJkJyk7XG4gICAgY29udGV4dCEuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7IC8vICpjd2lzcHkqXG5cbiAgICByZXR1cm4ge1xuICAgICAgZWxlbWVudCxcbiAgICAgIGNvbnRleHRcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgc3RhdGljdWxhciA9IGNhbnZhc0ZhY3RvcnkoJ3N0YXRpYycpO1xuICBjb25zdCBkeW5hbWljID0gY2FudmFzRmFjdG9yeSgnZHluYW1pYycpO1xuXG4gIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gJzAnO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMDAwJztcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0aWN1bGFyLmVsZW1lbnQpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGR5bmFtaWMuZWxlbWVudCk7XG5cbiAgcmV0dXJuIHtcbiAgICBlbGVtZW50OiB7XG4gICAgICBzdGF0aWM6IHN0YXRpY3VsYXIuZWxlbWVudCxcbiAgICAgIGR5bmFtaWM6IGR5bmFtaWMuZWxlbWVudFxuICAgIH0sXG4gICAgY29udGV4dDoge1xuICAgICAgc3RhdGljOiBzdGF0aWN1bGFyLmNvbnRleHQsXG4gICAgICBkeW5hbWljOiBkeW5hbWljLmNvbnRleHRcbiAgICB9LFxuICAgIGNvbmZpZyxcblxuICAgIGNsZWFyOiBmdW5jdGlvbiAodHlwZTogQ2FudmFzVHlwZSwgY29sb3VyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICBjb25zdCB3aWR0aCA9IHRoaXMuY29uZmlnLndpZHRoO1xuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5jb25maWcuaGVpZ2h0O1xuICAgICAgY29uc3QgcHBwID0gdGhpcy5jb25maWcucHBwO1xuICAgIFxuICAgICAgaWYgKGNvbG91cikge1xuICAgICAgICB0aGlzLmNvbnRleHRbdHlwZV0uZmlsbFN0eWxlID0gY29sb3VyO1xuICAgICAgICB0aGlzLmNvbnRleHRbdHlwZV0uZmlsbFJlY3QoMCwgMCwgd2lkdGggKiBwcHAsIGhlaWdodCAqIHBwcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbnRleHRbdHlwZV0uY2xlYXJSZWN0KDAsIDAsIHdpZHRoICogcHBwLCBoZWlnaHQgKiBwcHApO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRTY2FsZUZhY3RvcjogZnVuY3Rpb24gKHZpZXdwb3J0V2lkdGg6IG51bWJlciwgdmlld3BvcnRIZWlnaHQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICBjb25zdCB2aWV3cG9ydElzTGFuZHNjYXBlID0gdmlld3BvcnRXaWR0aCA+IHZpZXdwb3J0SGVpZ2h0O1xuICAgICAgY29uc3QgY2FudmFzSXNMYW5kc2NhcGUgPSB0aGlzLmNvbmZpZy53aWR0aCA+IHRoaXMuY29uZmlnLmhlaWdodDtcbiAgICAgIGxldCBwaXhlbHNQZXJQaXhlbDogbnVtYmVyO1xuICAgIFxuICAgICAgaWYgKHZpZXdwb3J0SXNMYW5kc2NhcGUpIHtcbiAgICAgICAgaWYgKGNhbnZhc0lzTGFuZHNjYXBlICYmIHRoaXMuY29uZmlnLmhlaWdodCAqICh2aWV3cG9ydFdpZHRoIC8gdGhpcy5jb25maWcud2lkdGgpIDw9IHZpZXdwb3J0SGVpZ2h0KSB7XG4gICAgICAgICAgcGl4ZWxzUGVyUGl4ZWwgPSB2aWV3cG9ydFdpZHRoIC8gdGhpcy5jb25maWcud2lkdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGl4ZWxzUGVyUGl4ZWwgPSB2aWV3cG9ydEhlaWdodCAvIHRoaXMuY29uZmlnLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFjYW52YXNJc0xhbmRzY2FwZSAmJiB0aGlzLmNvbmZpZy53aWR0aCAqICh2aWV3cG9ydEhlaWdodCAvIHRoaXMuY29uZmlnLmhlaWdodCkgPD0gdmlld3BvcnRXaWR0aCkge1xuICAgICAgICAgIHBpeGVsc1BlclBpeGVsID0gdmlld3BvcnRIZWlnaHQgLyB0aGlzLmNvbmZpZy5oZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGl4ZWxzUGVyUGl4ZWwgPSB2aWV3cG9ydFdpZHRoIC8gdGhpcy5jb25maWcud2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE1hdGguZmxvb3IocGl4ZWxzUGVyUGl4ZWwpO1xuICAgIH0sXG5cbiAgICBmaXRUb1ZpZXdwb3J0OiBmdW5jdGlvbiAoKTogdm9pZCB7XG4gICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgIGNvbnN0IHNjYWxlRmFjdG9yID0gdGhpcy5nZXRTY2FsZUZhY3Rvcih2aWV3cG9ydFdpZHRoLCB2aWV3cG9ydEhlaWdodCk7XG5cbiAgICAgIHRoaXMuY29uZmlnLnBwcCA9IHNjYWxlRmFjdG9yO1xuXG4gICAgICBmb3IgKGNvbnN0IHR5cGUgaW4gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnRbdHlwZSBhcyBDYW52YXNUeXBlXTtcblxuICAgICAgICBlbGVtZW50LndpZHRoID0gdGhpcy5jb25maWcud2lkdGggKiBzY2FsZUZhY3RvcjtcbiAgICAgICAgZWxlbWVudC5oZWlnaHQgPSB0aGlzLmNvbmZpZy5oZWlnaHQgKiBzY2FsZUZhY3RvcjtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLnRvcCA9IGAke3ZpZXdwb3J0SGVpZ2h0IC8gMiAtIGVsZW1lbnQuaGVpZ2h0IC8gMn1weGA7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IGAke3ZpZXdwb3J0V2lkdGggLyAyIC0gZWxlbWVudC53aWR0aCAvIDJ9cHhgO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBvblJlc2l6ZTogbnVsbFxuICB9O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==